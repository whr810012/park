(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-public-register"],{"31ae":function(e,t,i){"use strict";i.r(t);var r=i("5fde"),s=i("9fba");for(var a in s)"default"!==a&&function(e){i.d(t,e,(function(){return s[e]}))}(a);i("3a3a");var o,n=i("f0c5"),c=Object(n["a"])(s["default"],r["b"],r["c"],!1,null,"d5cf1258",null,!1,r["a"],o);t["default"]=c.exports},"3a3a":function(e,t,i){"use strict";var r=i("51fc"),s=i.n(r);s.a},"51fc":function(e,t,i){var r=i("620f");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var s=i("4f06").default;s("5a6b8fdc",r,!0,{sourceMap:!1,shadowMode:!1})},"5fde":function(e,t,i){"use strict";var r;i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){return r}));var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"register"},[i("v-uni-text",{staticClass:"back-btn iconfont iconzuo",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.navBack.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"right-top-sign"}),i("v-uni-view",{staticClass:"wrapper"},[i("v-uni-view",{staticClass:"left-top-sign"},[e._v("REGISTER")]),i("v-uni-view",{staticClass:"welcome"},[e._v("账号注册！")]),i("v-uni-view",{staticClass:"input-content"},[i("v-uni-view",{staticClass:"input-item"},[i("v-uni-text",{staticClass:"tit"},[e._v("手机号码")]),i("v-uni-input",{attrs:{type:"number",placeholder:"请输入手机号码",maxlength:"11"},model:{value:e.registerParams.mobile,callback:function(t){e.$set(e.registerParams,"mobile",t)},expression:"registerParams.mobile"}})],1),i("v-uni-view",{staticClass:"input-item input-item-sms-code"},[i("v-uni-view",{staticClass:"input-wrapper"},[i("v-uni-view",{staticClass:"rf-input-wrapper"},[i("v-uni-view",{staticClass:"tit"},[e._v("验证码")]),i("v-uni-input",{attrs:{type:"number",placeholder:"请输入验证码",maxlength:"4","data-key":"mobile"},model:{value:e.registerParams.code,callback:function(t){e.$set(e.registerParams,"code",t)},expression:"registerParams.code"}})],1),i("v-uni-button",{staticClass:"sms-code-btn",attrs:{disabled:e.smsCodeBtnDisabled},on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.getSmsCode.apply(void 0,arguments)}}},[e.smsCodeBtnDisabled?i("v-uni-text",{staticClass:"sms-code-resend"},[e._v(e._s("重新发送 ("+e.codeSeconds+")"))]):i("v-uni-text",[e._v("获取验证码")])],1)],1)],1),i("v-uni-view",{staticClass:"input-item"},[i("v-uni-text",{staticClass:"tit"},[e._v("密码")]),i("v-uni-input",{attrs:{type:"password",placeholder:"请输入密码",maxlength:"18"},model:{value:e.registerParams.password,callback:function(t){e.$set(e.registerParams,"password",t)},expression:"registerParams.password"}})],1),i("v-uni-view",{staticClass:"input-item"},[i("v-uni-text",{staticClass:"tit"},[e._v("确认密码")]),i("v-uni-input",{attrs:{type:"password",placeholder:"请输入确认密码",maxlength:"18"},model:{value:e.registerParams.password_repetition,callback:function(t){e.$set(e.registerParams,"password_repetition",t)},expression:"registerParams.password_repetition"}})],1),i("v-uni-view",{staticClass:"input-item"},[i("v-uni-text",{staticClass:"tit"},[e._v("昵称")]),i("v-uni-input",{attrs:{type:"text",placeholder:"请输入您的昵称",maxlength:"12"},model:{value:e.registerParams.nickname,callback:function(t){e.$set(e.registerParams,"nickname",t)},expression:"registerParams.nickname"}})],1),e.closeRegisterPromoCode?i("v-uni-view",{staticClass:"input-item"},[i("v-uni-text",{staticClass:"tit"},[e._v("邀请码")]),i("v-uni-input",{attrs:{type:"text",placeholder:"请输入您的邀请码"},model:{value:e.registerParams.promoCode,callback:function(t){e.$set(e.registerParams,"promoCode",t)},expression:"registerParams.promoCode"}})],1):e._e()],1),i("v-uni-button",{staticClass:"confirm-btn",class:"bg-"+e.themeColor.name,attrs:{disabled:e.btnLoading,loading:e.btnLoading},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toRegister.apply(void 0,arguments)}}},[e._v("注册")])],1),i("v-uni-view",{staticClass:"register-section"},[e._v("已经注册过了?"),i("v-uni-text",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.navTo("/pages/public/login")}}},[e._v("马上登录")])],1),i("v-uni-view",{staticClass:"footer-protocol"},[i("v-uni-text",{staticClass:"cuIcon",class:e.appAgreementDefaultSelect?"text-"+e.themeColor.name+" cuIcon-radiobox":"cuIcon-round",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.isAppAgreementDefaultSelect.apply(void 0,arguments)}}}),i("v-uni-text",{staticClass:"content"},[e._v("同意")]),i("v-uni-navigator",{class:"text-"+e.themeColor.name,attrs:{url:"/pages/set/about/detail?field=protocol_register&title=注册协议","open-type":"navigate"}},[e._v("《注册协议》")])],1)],1)},a=[]},"620f":function(e,t,i){var r=i("24fb");t=r(!1),t.push([e.i,'.register[data-v-d5cf1258]{padding-top:60px;position:relative;width:100vw;overflow:hidden;background:#fff}.register .wrapper[data-v-d5cf1258]{position:relative;width:100vw;z-index:90;background:#fff;padding-bottom:%?40?%}.register .wrapper .welcome[data-v-d5cf1258]{position:relative;left:%?50?%;top:%?-90?%;font-size:%?46?%;color:#555;text-shadow:1px 0 1px rgba(0,0,0,.3)}.register .wrapper .input-content[data-v-d5cf1258]{padding:0 %?60?%}.register .wrapper .input-item[data-v-d5cf1258]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:start;-webkit-align-items:flex-start;align-items:flex-start;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;padding:0 %?30?%;background:#f8f6fc;height:%?120?%;border-radius:4px;margin-bottom:%?50?%}.register .wrapper .input-item[data-v-d5cf1258]:last-child{margin-bottom:0}.register .wrapper .input-item .tit[data-v-d5cf1258]{height:%?50?%;line-height:%?56?%;font-size:%?26?%;color:#606266}.register .wrapper .input-item uni-input[data-v-d5cf1258]{width:calc(100% - %?100?%);height:%?60?%;font-size:%?30?%;color:#303133;width:100%}.register .wrapper .input-item-sms-code[data-v-d5cf1258]{position:relative;width:100%}.register .wrapper .input-item-sms-code .sms-code-btn[data-v-d5cf1258]{position:absolute;color:#111;right:%?20?%;bottom:%?20?%;font-size:%?28?%}.register .wrapper .input-item-sms-code .sms-code-resend[data-v-d5cf1258]{color:#999}.register .wrapper .input-item-sms-code .sms-code-btn[data-v-d5cf1258]:after{border:none;background-color:initial}.register .wrapper .forget-section[data-v-d5cf1258]{font-size:%?26?%;color:#4399fc;text-align:center;margin-top:%?40?%}.register .back-btn[data-v-d5cf1258]{position:absolute;left:%?40?%;z-index:9999;padding-top:0;top:%?40?%;font-size:%?40?%;color:#303133}.register .left-top-sign[data-v-d5cf1258]{font-size:%?120?%;color:#f8f8f8;position:relative;left:%?-16?%}.register .right-top-sign[data-v-d5cf1258]{position:absolute;top:%?80?%;right:%?-30?%;z-index:95}.register .right-top-sign[data-v-d5cf1258]:before,.register .right-top-sign[data-v-d5cf1258]:after{display:block;content:"";width:%?400?%;height:%?80?%;background:#b4f3e2}.register .right-top-sign[data-v-d5cf1258]:before{-webkit-transform:rotate(50deg);transform:rotate(50deg);border-radius:0 50px 0 0}.register .right-top-sign[data-v-d5cf1258]:after{position:absolute;right:%?-198?%;top:0;-webkit-transform:rotate(-50deg);transform:rotate(-50deg);border-radius:50px 0 0 0}.register .register-section[data-v-d5cf1258]{margin:%?30?% 0 %?50?%;width:100%;font-size:%?26?%;color:#606266;text-align:center}.register .register-section uni-text[data-v-d5cf1258]{color:#4399fc;margin-left:%?10?%}',""]),e.exports=t},9370:function(e,t,i){"use strict";var r=i("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("8e6e"),i("ac6a"),i("456d"),i("96cf");var s=r(i("3b8d")),a=r(i("bd86")),o=i("2f62"),n=i("7ded"),c=r(i("5028"));function d(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?d(Object(i),!0).forEach((function(t){(0,a.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var p={data:function(){return{appAgreementDefaultSelect:this.$mSettingConfig.appAgreementDefaultSelect,closeRegisterPromoCode:this.$mSettingConfig.closeRegisterPromoCode,registerParams:{mobile:"",password:"",password_repetition:"",promoCode:"",nickname:"",code:""},btnLoading:!1,reqBody:{},codeSeconds:0,smsCodeBtnDisabled:!0}},onShow:function(){uni.getStorageSync("accessToken")&&this.$mRouter.reLaunch({route:"/pages/index/index"})},onLoad:function(e){this.$mStore.getters.hasLogin&&this.$mRouter.reLaunch({route:"/pages/index/index"});var t=(0,c.default)().valueOf()/1e3-uni.getStorageSync("registerSmsCodeTime");t<60?(this.codeSeconds=this.$mConstDataConfig.sendCodeTime-parseInt(t,10),this.handleSmsCodeTime(this.codeSeconds)):(this.codeSeconds=this.$mConstDataConfig.sendCodeTime,this.smsCodeBtnDisabled=!1,uni.removeStorageSync("registerSmsCodeTime"));var i=uni.getStorageSync("backToPage");-1!==i.indexOf("promo_code")?this.registerParams.promoCode=JSON.parse(i)["query"]["promo_code"]:this.registerParams.promoCode=e.promo_code},methods:l({isAppAgreementDefaultSelect:function(){this.appAgreementDefaultSelect=!this.appAgreementDefaultSelect}},(0,o.mapMutations)(["login"]),{navBack:function(){this.$mRouter.back()},navTo:function(e){this.$mRouter.push({route:e})},getSmsCode:function(){var e=this;this.reqBody["mobile"]=this.registerParams["mobile"];var t=this.$mGraceChecker.check(this.reqBody,this.$mFormRule.sendCodeRule);t?this.$http.post(n.smsCode,{mobile:this.registerParams.mobile,usage:"register"}).then((function(t){t.data?e.$mHelper.toast("验证码发送成功, 验证码是".concat(t.data)):e.$mHelper.toast("验证码已发送."),e.smsCodeBtnDisabled=!0,uni.setStorageSync("registerSmsCodeTime",(0,c.default)().valueOf()/1e3),e.handleSmsCodeTime(59)})):this.$mHelper.toast(this.$mGraceChecker.error)},handleSmsCodeTime:function(e){var t=this,i=setInterval((function(){0===e?(clearInterval(i),t.smsCodeBtnDisabled=!1):(t.codeSeconds=e,t.smsCodeBtnDisabled=!0,e--)}),1e3)},toRegister:function(){var e=(0,s.default)(regeneratorRuntime.mark((function e(){var t,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.$mSettingConfig.closeRegister){e.next=3;break}return this.$mHelper.toast("暂未开放注册，敬请期待～"),e.abrupt("return");case 3:if(this.appAgreementDefaultSelect){e.next=6;break}return this.$mHelper.toast("请勾选同意注册协议，即可注册哦"),e.abrupt("return");case 6:if(this.reqBody["mobile"]=this.registerParams["mobile"],this.reqBody["password"]=this.registerParams["password"],this.reqBody["code"]=this.registerParams["code"],this.reqBody["nickname"]=this.registerParams["nickname"],t=this.$mGraceChecker.check(this.reqBody,this.$mFormRule.registerRule),t){e.next=14;break}return this.$mHelper.toast(this.$mGraceChecker.error),e.abrupt("return");case 14:if(this.registerParams["password"]===this.registerParams["password_repetition"]){e.next=17;break}return this.$mHelper.toast("两次输入的密码不一致"),e.abrupt("return");case 17:return this.reqBody["password_repetition"]=this.registerParams["password_repetition"],this.reqBody["promo_code"]=this.registerParams["promoCode"],this.btnLoading=!0,this.reqBody.group=this.$mHelper.platformGroupFilter(),e.next=23,this.$http.post(n.registerByPass,this.reqBody).then((function(){i.btnLoading=!1,i.$mHelper.toast("恭喜您注册成功"),uni.setStorageSync("loginMobile",i.reqBody["mobile"]),uni.setStorageSync("loginPassword",i.reqBody["password"]),i.$mRouter.push({route:"/pages/public/login"})})).catch((function(){i.btnLoading=!1}));case 23:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()})};t.default=p},"9fba":function(e,t,i){"use strict";i.r(t);var r=i("9370"),s=i.n(r);for(var a in r)"default"!==a&&function(e){i.d(t,e,(function(){return r[e]}))}(a);t["default"]=s.a}}]);