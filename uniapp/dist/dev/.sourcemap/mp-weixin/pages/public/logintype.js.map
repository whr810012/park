{"version":3,"sources":["uni-app:///src/main.js","webpack:///./src/pages/public/logintype.vue?d37d","webpack:///./src/pages/public/logintype.vue?6571","webpack:///./src/pages/public/logintype.vue?649a","webpack:///./src/pages/public/logintype.vue?70bb","uni-app:///src/pages/public/logintype.vue","webpack:///./src/pages/public/logintype.vue?483c","webpack:///./src/pages/public/logintype.vue?6377"],"names":["require","_vue","_interopRequireDefault","_logintype","e","__esModule","default","createPage","Page","_login","_typeof","o","Symbol","iterator","constructor","prototype","_regeneratorRuntime","rfProtocolPopup","resolve","_default","exports","components","data","btnLoading","isRfProtocolPopupShow","appAgreementDefaultSelect","$mSettingConfig","isAuthLoginShow","isIosAuthLoginShow","logo","appLogo","appName","promoCodeParams","styleLoginType","wechat","$mAssetsPath","apple","closeThirdPartyLogin","loginTypeList","text","icon","onShow","uni","getStorageSync","$mRouter","reLaunch","route","onLoad","options","_this2","$mStore","commit","code","split","length","backUrl","indexOf","promo_code","JSON","parse","_this","$http","get","wechatH5Login","_objectSpread","then","_ref","_asyncToGenerator","mark","_callee","r","backToPage","wrap","_callee$","_context","prev","next","login","user_info","original","showModal","content","success","confirmRes","confirm","setStorageSync","stringify","push","redirectTo","removeStorageSync","stop","_x","apply","arguments","catch","wx","loginRes","fail","$mHelper","log","methods","navTo","toast","handleRfProtocolPopupShow","popupState","toAuthLogin","_this3","authApi","provider","getUserInfo","infoRes","params","mpWechatLogin","thirdPartyAuthLogin","getUserProfile","desc","loading","undefined","post","_ref2","_callee2","_callee2$","_context2","_x2","toIosAuthLogin","plus","oauth","getServices","services","appleService","i","len","id","thirdPartyApple","target","appleInfo","_ref3","_callee3","_callee3$","_context3","_x3"],"mappings":"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","file":"pages/public/logintype.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\nimport Vue from 'vue'\nimport Page from './pages/public/logintype.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./logintype.vue?vue&type=template&id=33ec9ff6&\"\nvar renderjs\nimport script from \"./logintype.vue?vue&type=script&lang=js&\"\nexport * from \"./logintype.vue?vue&type=script&lang=js&\"\nimport style0 from \"./logintype.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/public/logintype.vue\"\nexport default component.exports","export * from \"-!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./logintype.vue?vue&type=template&id=33ec9ff6&\"","var components\ntry {\n  components = {\n    rfImage: function () {\n      return import(\n        /* webpackChunkName: \"components/rf-image/rf-image\" */ \"@/components/rf-image/rf-image.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./logintype.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./logintype.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"login-type\">\r\n\t\t<view class=\"logo\">\r\n\t\t\t<rf-image :preview=\"false\" :src=\"logo\"></rf-image>\r\n\t\t</view>\r\n\t\t<view>\r\n\t\t\t<button\r\n\t\t\t\tclass=\"confirm-btn confirm-btn-bg\"\r\n\t\t\t\t:disabled=\"btnLoading\"\r\n\t\t\t\t:class=\"'text-' + themeColor.name\"\r\n\t\t\t\t@tap=\"navTo('/pages/public/login')\"\r\n\t\t\t>\r\n\t\t\t\t已有账号登录\r\n\t\t\t</button>\r\n\t\t\t<button\r\n\t\t\t\tclass=\"confirm-btn confirm-btn-bg\"\r\n\t\t\t\t:disabled=\"btnLoading\"\r\n\t\t\t\t:class=\"'text-' + themeColor.name\"\r\n\t\t\t\t@tap=\"navTo(styleLoginType === 'one' ? `/pages/public/register` : `/pages/public/login?type=1`)\"\r\n\t\t\t>\r\n\t\t\t\t立即注册\r\n\t\t\t</button>\r\n\t\t</view>\r\n\t\t<!--协议popup-->\r\n\t\t<rf-protocol-popup\r\n\t\t\tref=\"mapState\"\r\n\t\t\t@popupState=\"popupState\"\r\n\t\t\tprotocolPath=\"/pages/set/about/detail?field=protocol_register&title=注册协议\"\r\n\t\t\tpolicyPath=\"/pages/set/about/detail?field=protocol_privacy&title=隐私协议\"\r\n\t\t\tv-if=\"isRfProtocolPopupShow\"\r\n\t\t></rf-protocol-popup>\r\n\t\t<!-- 底部协议 -->\r\n\t\t<view class=\"footer-protocol\">\r\n\t\t\t<text\r\n\t\t\t\t@tap=\"handleRfProtocolPopupShow\"\r\n\t\t\t\tclass=\"cuIcon\"\r\n\t\t\t\t:class=\"appAgreementDefaultSelect ? `text-${themeColor.name} cuIcon-radiobox` : 'cuIcon-round'\"\r\n\t\t\t></text>\r\n\t\t\t<text class=\"content\">登录表示同意</text>\r\n\t\t\t<!-- 协议地址 -->\r\n\t\t\t<text :class=\"'text-' + themeColor.name\" @tap=\"handleRfProtocolPopupShow\">《{{appName}} 协议》</text>\r\n\t\t</view>\r\n\t\t<!-- 底部协议 -->\r\n<!--\t\tv-if=\"isAuthLoginShow && !closeThirdPartyLogin\"-->\r\n\t\t<view class=\"footer\" v-if=\"isAuthLoginShow && !closeThirdPartyLogin\">\r\n\t\t\t<view class=\"d-header\">\r\n\t\t\t\t<text>其他登录方式</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"login-type-list\">\r\n\t\t\t\t<button\r\n\t\t\t\t\tv-if=\"isAuthLoginShow\"\r\n\t\t\t\t\t:disabled=\"btnLoading\"\r\n\t\t\t\t\t:loading=\"btnLoading\"\r\n\t\t\t\t\tclass=\"login-type-btn\"\r\n\t\t\t\t\t\t\t@tap=\"toAuthLogin\">\r\n\t\t\t\t\t<image class=\"image\" :src=\"wechat\"></image>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button\r\n\t\t\t\t\t:disabled=\"btnLoading\"\r\n\t\t\t\t\t:loading=\"btnLoading\"\r\n\t\t\t\t\tv-if=\"isIosAuthLoginShow\"\r\n\t\t\t\t\tclass=\"login-type-btn\"\r\n\t\t\t\t\t\t\topen-type=\"getUserInfo\"\r\n\t\t\t\t\t\t\t@tap=\"toIosAuthLogin\">\r\n\t\t\t\t\t<image class=\"image\" :src=\"apple\"></image>\r\n\t\t\t\t</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n<script>\r\n\t/**\r\n\t * @des 登录类型\r\n\t *\r\n\t * @author stav stavyan@qq.com\r\n\t * @date 2020-01-13 12:02\r\n\t * @copyright 2019\r\n\t */\r\n\timport { mpWechatLogin, wechatH5Login, thirdPartyWechatOpenPlatform, thirdPartyApple } from '@/api/login';\r\n\timport rfProtocolPopup from '@/components/rf-protocol-popup';\r\n\texport default {\r\n\t\tcomponents: { rfProtocolPopup },\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tbtnLoading: false,\r\n\t\t\t\tisRfProtocolPopupShow: false, // 控制协议popup显示\r\n\t\t\t\tappAgreementDefaultSelect: this.$mSettingConfig.appAgreementDefaultSelect, // 是否允许点击登录按钮\r\n\t\t\t\tisAuthLoginShow: false,\r\n\t\t\t\tisIosAuthLoginShow: false,\r\n\t\t\t\tlogo: this.$mSettingConfig.appLogo,\r\n\t\t\t\tappName: this.$mSettingConfig.appName,\r\n\t\t\t\tpromoCodeParams: {},\r\n\t\t\t\tstyleLoginType: this.$mSettingConfig.styleLoginType,\r\n\t\t\t\twechat: this.$mAssetsPath.wechat,\r\n\t\t\t\tapple: this.$mAssetsPath.apple,\r\n\t\t\t\tcloseThirdPartyLogin: this.$mSettingConfig.closeThirdPartyLogin,\r\n\t\t\t\tloginTypeList: [\r\n\t\t\t\t\t{ text: '微信', icon: 'iconweixin' }\r\n\t\t\t\t]\r\n\t\t\t};\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tthis.btnLoading = false;\r\n\t\t\tif (uni.getStorageSync('accessToken')) {\r\n\t\t\t\tthis.$mRouter.reLaunch({ route: '/pages/index/index' });\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(options) {\r\n\t\t\tthis.$mStore.commit('logout');\r\n\t\t\t/*  #ifdef H5  */\r\n\t\t\tif (this.$mPayment.isWechat()) {\r\n\t\t\t\tthis.isAuthLoginShow = true;\r\n\t\t\t}\r\n\t\t\t/*  #endif  */\r\n\t\t\t/*  #ifndef H5 */\r\n\t\t\tthis.isAuthLoginShow = true;\r\n\t\t\t/*  #endif  */\r\n\t\t\t/*  #ifdef APP-PLUS */\r\n\t\t\t// console.log(uni.getSystemInfoSync().system > 13);\r\n\t\t\tif (uni.getSystemInfoSync().platform === 'ios') {\r\n\t\t\t\tthis.isIosAuthLoginShow = true;\r\n\t\t\t}\r\n\t\t\t/*  #endif  */\r\n\t\t\t// 用户多次点击授权登录会生成多个code 去最后一个code\r\n\t\t\tthis.code = options.code && options.code.split(',')[options.code.split(',').length - 1];\r\n\t\t\t// 如果不是第一次进来 就不需要强制阅读协议\r\n\t\t\tif (!uni.getStorageSync('notFirstTimeLogin')) {\r\n\t\t\t\tif (!this.appAgreementDefaultSelect) {\r\n\t\t\t\t\tthis.appAgreementDefaultSelect = false;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.appAgreementDefaultSelect = true;\r\n\t\t\t}\r\n\t\t\tconst backUrl = uni.getStorageSync('backToPage');\r\n\t\t\tif (backUrl.indexOf('promo_code') !== -1) {\r\n\t\t\t\tthis.promoCodeParams.promo_code = JSON.parse(backUrl)['query']['promo_code'];\r\n\t\t\t}\r\n\t\t\tconst _this = this;\r\n\t\t\tif (this.code) {\r\n\t\t\t\tthis.btnLoading = true;\r\n\t\t\t\tthis.$http\r\n\t\t\t\t\t.get(wechatH5Login, {\r\n\t\t\t\t\t\tcode: this.code,\r\n\t\t\t\t\t\t..._this.promoCodeParams\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(async r => {\r\n\t\t\t\t\t\tthis.btnLoading = false;\r\n\t\t\t\t\t\tif (!r.data.login) {\r\n\t\t\t\t\t\t\tthis.user_info = r.data.user_info.original;\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\tcontent: '您尚未绑定账号，是否跳转登录页面？',\r\n\t\t\t\t\t\t\t\tsuccess: confirmRes => {\r\n\t\t\t\t\t\t\t\t\tif (confirmRes.confirm) {\r\n\t\t\t\t\t\t\t\t\t\tuni.setStorageSync(\r\n\t\t\t\t\t\t\t\t\t\t\t'wechatUserInfo',\r\n\t\t\t\t\t\t\t\t\t\t\tJSON.stringify(_this.user_info)\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t_this.$mRouter.push({ route: '/pages/public/login' });\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tthis.btnLoading = false;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tawait this.$mStore.commit('login', r.data.user_info);\r\n\t\t\t\t\t\t\tconst backToPage = uni.getStorageSync('backToPage');\r\n\t\t\t\t\t\t\tif (backToPage) {\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\tbackToPage.indexOf('/pages/profile/profile') !== -1 ||\r\n\t\t\t\t\t\t\t\t\tbackToPage.indexOf('/pages/cart/cart') !== -1 ||\r\n\t\t\t\t\t\t\t\t\tbackToPage.indexOf('/pages/index/index') !== -1 ||\r\n\t\t\t\t\t\t\t\t\tbackToPage.indexOf('/pages/notify/notify') !== -1 ||\r\n\t\t\t\t\t\t\t\t\tbackToPage.indexOf('/pages/category/category') !== -1\r\n\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\tthis.$mRouter.reLaunch(JSON.parse(backToPage));\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.$mRouter.redirectTo(JSON.parse(backToPage));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tuni.removeStorageSync('backToPage');\r\n\t\t\t\t\t\t\t\tuni.removeStorageSync('wechatUserInfo');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$mRouter.reLaunch({ route: '/pages/profile/profile' });\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch(() => {\r\n\t\t\t\t\tthis.btnLoading = false;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t/*  #ifdef MP-WEIXIN  */\r\n\t\t\t// eslint-disable-next-line\r\n\t\t\twx.login({\r\n\t\t\t\tsuccess: function(loginRes) {\r\n\t\t\t\t\t_this.code = loginRes.code;\r\n\t\t\t\t},\r\n\t\t\t\tfail: function() {\r\n\t\t\t\t\t_this.$mHelper.log('暂不支持小程序登录');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t/*  #endif  */\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 通用跳转\r\n\t\t\tnavTo(route) {\r\n\t\t\t\tif (!this.appAgreementDefaultSelect) {\r\n\t\t\t\t\tthis.$mHelper.toast('请勾选并阅读协议，才能进行下一步哦', 1.5 * 1000);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.$mRouter.redirectTo({ route });\r\n\t\t\t},\r\n\t\t\t// 显示协议popup\r\n\t\t\thandleRfProtocolPopupShow() {\r\n\t\t\t\tthis.isRfProtocolPopupShow = true;\r\n\t\t\t},\r\n\t\t\t// 监听是否同意协议\r\n\t\t\tpopupState(e) {\r\n\t\t\t\tif (e) {\r\n\t\t\t\t\tthis.appAgreementDefaultSelect = true;\r\n\t\t\t\t\tuni.setStorageSync('notFirstTimeLogin', true);\r\n\t\t\t\t\tthis.isRfProtocolPopupShow = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.appAgreementDefaultSelect = false;\r\n\t\t\t\t\tthis.isRfProtocolPopupShow = false;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 授权登录\r\n\t\t\ttoAuthLogin() {\r\n\t\t\t\tthis.btnLoading = true;\r\n\t\t\t\tif (!this.appAgreementDefaultSelect) {\r\n\t\t\t\t\tthis.$mHelper.toast('请阅读并同意协议', 1.5 * 1000);\r\n\t\t\t\t\tthis.btnLoading = false;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst _this = this;\r\n\t\t\t\t/*  #ifdef H5  */\r\n\t\t\t\tif (this.$mPayment.isWechat()) {\r\n\t\t\t\t\tconst href = window.location.href;\r\n\t\t\t\t\twindow.location.href = `https://open.weixin.qq.com/connect/oauth2/authorize?\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tappid=${this.$mConfig.weixinAppId}&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tredirect_uri=${href}&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tresponse_type=code&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tscope=snsapi_userinfo&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate=STATE#wechat_redirect`;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$mHelper.toast('当前平台不支持授权登录');\r\n\t\t\t\t}\r\n\t\t\t\t/*  #endif  */\r\n\t\t\t\tlet authApi;\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\t// eslint-disable-next-line\r\n\t\t\t\tplus.oauth.getServices(function(services) {\r\n\t\t\t\t\tlet weixinService;\r\n\t\t\t\t\tif (services && services.length) {\r\n\t\t\t\t\t\tfor (let i = 0, len = services.length; i < len; i++) {\r\n\t\t\t\t\t\t\tif (services[i].id === 'weixin') {\r\n\t\t\t\t\t\t\t\tweixinService = services[i];\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!weixinService) {\r\n\t\t\t\t\t\t\t_this.$mHelper.toast('没有微信登录授权服务');\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet group = 'tinyShopIos';\r\n\t\t\t\t\t\tif (uni.getSystemInfoSync().platform === 'android') {\r\n\t\t\t\t\t\t\tgroup = 'tinyShopAndroid';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tweixinService.authorize(e => {\r\n\t\t\t\t\t\t\tauthApi = `${thirdPartyWechatOpenPlatform}?code=${e.code || ''}&group=${group}&promo_code=${_this.promoCodeParams.promo_code || ''}`;\r\n\t\t\t\t\t\t\t_this.thirdPartyAuthLogin(authApi);\r\n\t\t\t\t\t\t}, function(err) {\r\n\t\t\t\t\t\t\t// 授权失败 error\r\n\t\t\t\t\t\t\t_this.btnLoading = false;\r\n\t\t\t\t\t\t\t_this.$mHelper.toast(err.message.split(',')[0]);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}, function() {\r\n\t\t\t\t\t// 获取 services 失败\r\n\t\t\t\t\t_this.btnLoading = false;\r\n\t\t\t\t});\r\n\t\t\t\t// #endif\r\n\t\t\t\t/*  #ifdef MP-WEIXIN */\r\n\t\t\t\tuni.login({\r\n\t\t\t\t\tprovider: 'weixin',\r\n\t\t\t\t\tsuccess: function(loginRes) {\r\n\t\t\t\t\t\tuni.getUserInfo({\r\n\t\t\t\t\t\t\tprovider: 'weixin',\r\n\t\t\t\t\t\t\tsuccess: function(infoRes) {\r\n\t\t\t\t\t\t\t\tlet params = _this.promoCodeParams;\r\n\t\t\t\t\t\t\t\tauthApi = mpWechatLogin;\r\n\t\t\t\t\t\t\t\tparams = { ...infoRes, ...params };\r\n\t\t\t\t\t\t\t\tparams.code = loginRes.code;\r\n\t\t\t\t\t\t\t\t_this.thirdPartyAuthLogin(authApi, params);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: function() {\r\n\t\t\t\t\t\t\t\t_this.btnLoading = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function() {\r\n\t\t\t\t\t\t_this.btnLoading = false;\r\n\t\t\t\t\t\t_this.$mHelper.log('暂不支持小程序登录');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t/*  #endif  */\r\n\t\t\t\t/*  #ifdef MP-WEIXIN */\r\n\t\t\t\t// eslint-disable-next-line\r\n\t\t\t\twx.getUserProfile({\r\n\t\t\t\t\tdesc: '用于完善用户资料', // 声明获取用户个人信息后的用途，后续会展示在弹窗中，请谨慎填写\r\n\t\t\t\t\tsuccess: (infoRes) => {\r\n\t\t\t\t\t\tlet params = _this.promoCodeParams;\r\n\t\t\t\t\t\tauthApi = mpWechatLogin;\r\n\t\t\t\t\t\tparams = { ...infoRes, ...params };\r\n\t\t\t\t\t\tparams.code = this.code;\r\n\t\t\t\t\t\t_this.thirdPartyAuthLogin(authApi, params);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function() {\r\n\t\t\t\t\t\t_this.loading = false;\r\n\t\t\t\t\t\t_this.btnLoading = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t/*  #endif  */\r\n\t\t\t},\r\n\t\t\tthirdPartyAuthLogin(authApi, params = {}) {\r\n\t\t\t\tconst _this = this;\r\n\t\t\t\t_this.$http\r\n\t\t\t\t\t.post(authApi, params)\r\n\t\t\t\t\t.then(async r => {\r\n\t\t\t\t\t\t_this.btnLoading = false;\r\n\t\t\t\t\t\tif (!r.data.login) {\r\n\t\t\t\t\t\t\t_this.user_info = r.data.user_info;\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\tcontent: '您尚未绑定账号，是否跳转登录页面？',\r\n\t\t\t\t\t\t\t\tsuccess: confirmRes => {\r\n\t\t\t\t\t\t\t\t\tif (confirmRes.confirm) {\r\n\t\t\t\t\t\t\t\t\t\tuni.setStorageSync(\r\n\t\t\t\t\t\t\t\t\t\t\t'wechatUserInfo',\r\n\t\t\t\t\t\t\t\t\t\t\tJSON.stringify(_this.user_info)\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t_this.$mRouter.push({\r\n\t\t\t\t\t\t\t\t\t\t\troute: '/pages/public/login'\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tawait _this.$mStore.commit('login', r.data.user_info);\r\n\t\t\t\t\t\t\t_this.$mHelper.toast('已为您授权登录');\r\n\t\t\t\t\t\t\tconst backToPage = uni.getStorageSync('backToPage');\r\n\t\t\t\t\t\t\tif (backToPage) {\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\tbackToPage.indexOf('/pages/profile/profile') !== -1 ||\r\n\t\t\t\t\t\t\t\t\tbackToPage.indexOf('/pages/cart/cart') !== -1 ||\r\n\t\t\t\t\t\t\t\t\tbackToPage.indexOf('/pages/notify/notify') !== -1 ||\r\n\t\t\t\t\t\t\t\t\tbackToPage.indexOf('/pages/index/index') !== -1 ||\r\n\t\t\t\t\t\t\t\t\tbackToPage.indexOf('/pages/category/category') !== -1\r\n\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t_this.$mRouter.reLaunch(JSON.parse(backToPage));\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t_this.$mRouter.redirectTo(JSON.parse(backToPage));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tuni.removeStorageSync('backToPage');\r\n\t\t\t\t\t\t\t\tuni.removeStorageSync('wechatUserInfo');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t_this.$mRouter.reLaunch({\r\n\t\t\t\t\t\t\t\t\troute: '/pages/profile/profile'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch(() => {\r\n\t\t\t\t\t_this.btnLoading = false;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 苹果授权登录\r\n\t\t\ttoIosAuthLogin() {\r\n\t\t\t\tthis.btnLoading = true;\r\n\t\t\t\tif (!this.appAgreementDefaultSelect) {\r\n\t\t\t\t\tthis.$mHelper.toast('请阅读并同意协议', 1.5 * 1000);\r\n\t\t\t\t\tthis.btnLoading = false;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst _this = this;\r\n\t\t\t\t// eslint-disable-next-line\r\n\t\t\t\tplus.oauth.getServices(function(services) {\r\n\t\t\t\t\tlet appleService;\r\n\t\t\t\t\tif (services && services.length) {\r\n\t\t\t\t\t\tfor (let i = 0, len = services.length; i < len; i++) {\r\n\t\t\t\t\t\t\tif (services[i].id === 'apple') {\r\n\t\t\t\t\t\t\t\tappleService = services[i];\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!appleService) {\r\n\t\t\t\t\t\t\t_this.btnLoading = false;\r\n\t\t\t\t\t\t\t_this.$mHelper.toast('没有苹果登录授权服务');\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tappleService.login(e => {\r\n\t\t\t\t\t\t\t_this.$http\r\n\t\t\t\t\t\t\t\t.post(thirdPartyApple, {\r\n\t\t\t\t\t\t\t\t\t...e.target.appleInfo,\r\n\t\t\t\t\t\t\t\t\t..._this.promoCodeParams\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.then(async r => {\r\n\t\t\t\t\t\t\t\t\t_this.btnLoading = false;\r\n\t\t\t\t\t\t\t\t\tif (!r.data.login) {\r\n\t\t\t\t\t\t\t\t\t\t_this.user_info = r.data.user_info;\r\n\t\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\t\tcontent: '您尚未绑定账号，是否跳转登录页面？',\r\n\t\t\t\t\t\t\t\t\t\t\tsuccess: confirmRes => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (confirmRes.confirm) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.setStorageSync(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'wechatUserInfo',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tJSON.stringify(_this.user_info)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.setStorageSync('oauthClient', 'iOS');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t_this.$mRouter.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troute: '/pages/public/login'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tawait _this.$mStore.commit('login', r.data.user_info);\r\n\t\t\t\t\t\t\t\t\t\t_this.$mHelper.toast('已为您授权登录');\r\n\t\t\t\t\t\t\t\t\t\tconst backToPage = uni.getStorageSync('backToPage');\r\n\t\t\t\t\t\t\t\t\t\tif (backToPage) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t\t\tbackToPage.indexOf('/pages/profile/profile') !== -1 ||\r\n\t\t\t\t\t\t\t\t\t\t\t\tbackToPage.indexOf('/pages/cart/cart') !== -1 ||\r\n\t\t\t\t\t\t\t\t\t\t\t\tbackToPage.indexOf('/pages/notify/notify') !== -1 ||\r\n\t\t\t\t\t\t\t\t\t\t\t\tbackToPage.indexOf('/pages/index/index') !== -1 ||\r\n\t\t\t\t\t\t\t\t\t\t\t\tbackToPage.indexOf('/pages/category/category') !== -1\r\n\t\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t_this.$mRouter.reLaunch(JSON.parse(backToPage));\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t_this.$mRouter.redirectTo(JSON.parse(backToPage));\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tuni.removeStorageSync('backToPage');\r\n\t\t\t\t\t\t\t\t\t\t\tuni.removeStorageSync('wechatUserInfo');\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t_this.$mRouter.reLaunch({\r\n\t\t\t\t\t\t\t\t\t\t\t\troute: '/pages/profile/profile'\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}).catch(() => {\r\n\t\t\t\t\t\t\t\t_this.btnLoading = false;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}, function() {\r\n\t\t\t\t\t\t\t// 获取 services 失败\r\n\t\t\t\t\t\t\t_this.btnLoading = false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}, function() {\r\n\t\t\t\t\t// 获取 services 失败\r\n\t\t\t\t\t_this.btnLoading = false;\r\n\t\t\t\t});\r\n\t\t\t\t// uni.login({\r\n\t\t\t\t// \tprovider: 'apple',\r\n\t\t\t\t// \tsuccess: function() {\r\n\t\t\t\t// \t\tuni.getUserInfo({\r\n\t\t\t\t// \t\t\tprovider: 'apple',\r\n\t\t\t\t// \t\t\tsuccess: function(infoRes) {\r\n\t\t\t\t// \t\t\t},\r\n\t\t\t\t// \t\t\tfail: function() {\r\n\t\t\t\t// \t\t\t\t_this.btnLoading = false;\r\n\t\t\t\t// \t\t\t}\r\n\t\t\t\t// \t\t});\r\n\t\t\t\t// \t},\r\n\t\t\t\t// \tfail: function(err) {\r\n\t\t\t\t// \t\t_this.btnLoading = false;\r\n\t\t\t\t// \t\t_this.$mHelper.log(err);\r\n\t\t\t\t// \t}\r\n\t\t\t\t// });\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n<style lang=\"scss\">\r\npage {\r\n\tbackground: #fff;\r\n\theight: calc(100% - 88upx);\r\n}\r\n\r\n.login-type {\r\n\tpadding-top: 80upx;\r\n\t.logo {\r\n\t\ttext-align: center;\r\n\t\tmargin-bottom: 80upx;\r\n\r\n\t\timage {\r\n\t\t\twidth: 180upx;\r\n\t\t\theight: 180upx;\r\n\t\t\tborder-radius: 28upx;\r\n\t\t}\r\n\t}\r\n\t.confirm-btn {\r\n\t\twidth: 84%;\r\n\t\tmargin: 0 7% 50upx;\r\n\t\theight: 84upx;\r\n\t\tline-height: 84upx;\r\n\t\tfont-size: $font-lg;\r\n\t\tborder: 1upx solid;\r\n\t}\r\n\t.confirm-btn-bg {\r\n\t\tbackground: none;\r\n\t}\r\n\t.footer {\r\n\t\twidth: 100%;\r\n\t\ttext-align: center;\r\n\t\tposition: fixed;\r\n\t\tbottom: 40upx;\r\n\t\tfont-size: $font-sm + 2upx;\r\n\t\t.protocol {\r\n\t\t\tcolor: $base-color;\r\n\t\t\tmargin: 0 10upx;\r\n\t\t}\r\n\t\t.d-header {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: center;\r\n\t\t\talign-items: center;\r\n\t\t\theight: 80upx;\r\n\t\t\tmargin-bottom: $spacing-base;\r\n\t\t\tfont-size: $font-base + 2upx;\r\n\t\t\tcolor: $font-color-base;\r\n\t\t\tposition: relative;\r\n\t\t\ttext {\r\n\t\t\t\tpadding: 0 $spacing-lg;\r\n\t\t\t\tbackground: #fff;\r\n\t\t\t\tposition: relative;\r\n\t\t\t\tz-index: 1;\r\n\t\t\t}\r\n\t\t\t&:after {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tleft: 50%;\r\n\t\t\t\ttop: 50%;\r\n\t\t\t\ttransform: translateX(-50%);\r\n\t\t\t\twidth: 300upx;\r\n\t\t\t\theight: 0;\r\n\t\t\t\tcontent: '';\r\n\t\t\t\tborder-bottom: 1px solid #ccc;\r\n\t\t\t}\r\n\t\t}\r\n\t\t.login-type-list {\r\n\t\t\twidth: 100%;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: center;\r\n\t\t\t.login-type-btn {\r\n\t\t\t\tborder: none;\r\n\t\t\t\tbackground: none;\r\n\t\t\t\tpadding: 0 40upx 0 0;\r\n\t\t\t\tmargin: 0;\r\n\t\t\t\t.image {\r\n\t\t\t\t\twidth: 64upx;\r\n\t\t\t\t\theight: 64upx;\r\n\t\t\t\t}\r\n\t\t\t\t&:after {\r\n\t\t\t\t\tborder: none;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t.iconfont {\r\n\t\t\t\tfont-size: 50upx;\r\n\t\t\t\tcolor: $font-color-base;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--9-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-4!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--9-oneOf-1-5!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./logintype.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--9-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-4!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--9-oneOf-1-5!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./logintype.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1735447283273\n      var cssReload = require(\"D:/CODE/park/park-vue/uniapp/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}