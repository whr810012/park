{"ast":null,"code":"import AMapLoader from \"@amap/amap-jsapi-loader\";\nexport default {\n  data() {\n    return {\n      // 地图搜索\n      showsearchResult: false,\n      autoCompleteComponent: undefined,\n      placeSearchComponent: undefined,\n      markerList: [],\n      mapInput: '',\n      inputSearchVal: '',\n      poiList: []\n    };\n  },\n  methods: {\n    //--------地图搜索-----------\n    search() {\n      this.is1 = !this.is1;\n      this.toolSerach = !this.toolSerach;\n      if (this.toolSerach === false) {\n        this.showsearchResult = false;\n        //清除结果标点，暂时还没做\n      }\n    },\n    markerResult(data) {\n      var marker = this.AMap.Marker({\n        position: [Number(data.location.lng), Number(data.location.lat)],\n        cursor: 'pointer',\n        // icon: carIcon,\n        autoRotation: true,\n        angle: 0,\n        offset: this.AMap.Pixel(-36, -30)\n      });\n      marker.setMap(this.mapall);\n      this.mapall.setFitView();\n    },\n    /** 初始化搜索工具 */\n    mapSearchInit() {\n      //在mounted中调用\n      var autoOptions = {\n        input: \"tipInput\"\n      };\n      var autoCompleteComponent = this.AMap.Autocomplete(autoOptions);\n      this.autoCompleteComponent = autoCompleteComponent;\n      // 注册placeSearch组件\n      this.placeSearchComponent = this.AMap.PlaceSearch();\n    },\n    searchKeyword() {\n      let cur = this;\n      this.placeSearchComponent.search(this.inputSearchVal, function (status, result) {\n        // 查询成功时，result即对应匹配的POI信息\n        console.log(status);\n        console.log(result);\n        if (status === 'complete' && result.info === \"OK\") {\n          cur.showsearchResult = true;\n          cur.poiList = result.poiList.pois;\n        } else {\n          cur.showsearchResult = false;\n          cur.poiList = [];\n          cur.$message({\n            message: \"没有查到结果\",\n            type: \"warning\"\n          });\n        }\n      });\n    }\n  },\n  mounted() {\n    AMapLoader.load({\n      key: \"a05ab04a5dbe61ad2fad7b664790a18f\",\n      // 申请好的Web端开发者Key，首次调用 load 时必填\n      version: \"2.0\",\n      // 指定要加载的 JSAPI 的版本，缺省时默认为 1.4.15\n      plugins: [] // 需要使用的的插件列表，如比例尺'AMap.Scale'等\n    }).then(AMap => {\n      this.AMap = AMap;\n      var autoOptions = {\n        input: \"tipInput\"\n      };\n      var autoCompleteComponent = new AMap.Autocomplete(autoOptions);\n      this.autoCompleteComponent = autoCompleteComponent;\n      // 注册placeSearch组件\n      this.placeSearchComponent = new AMap.PlaceSearch();\n    });\n  }\n};","map":{"version":3,"names":["AMapLoader","data","showsearchResult","autoCompleteComponent","undefined","placeSearchComponent","markerList","mapInput","inputSearchVal","poiList","methods","search","is1","toolSerach","markerResult","marker","AMap","Marker","position","Number","location","lng","lat","cursor","autoRotation","angle","offset","Pixel","setMap","mapall","setFitView","mapSearchInit","autoOptions","input","Autocomplete","PlaceSearch","searchKeyword","cur","status","result","console","log","info","pois","$message","message","type","mounted","load","key","version","plugins","then"],"sources":["C:\\Users\\Administrator\\Desktop\\ershou\\src\\components\\mapSelect.vue"],"sourcesContent":["<template>\r\n  <div class=\"map-select\">\r\n\r\n    <!-- 地图搜索栏 -->\r\n    <div class=\"tool_search\" v-if=\"this.toolShow && this.toolSerach\">\r\n      <el-input id=\"tipInput\" v-model=\"inputSearchVal\" placeholder=\"请输入搜索名称\">\r\n        <el-button icon=\"el-icon-search\" @click=\"searchKeyword\" style=\"width:60px\"></el-button>\r\n      </el-input>\r\n    </div>\r\n    <!-- 搜索结果栏 -->\r\n    <div class=\"tool_search_result\" v-if=\"this.toolShow && this.showsearchResult\">\r\n      <ul>\r\n        <li @click=\"markerResult(item)\" v-for=\"(item, index) in poiList\" :key=\"index\">{{ item.name }}</li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport AMapLoader from \"@amap/amap-jsapi-loader\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 地图搜索\r\n\t\t\tshowsearchResult:false,\r\n\t\t\tautoCompleteComponent: undefined,\r\n\t\t\tplaceSearchComponent: undefined,\r\n\t\t\tmarkerList:[],\r\n\t\t\tmapInput:'',\r\n\t\t\tinputSearchVal:'',\r\n\t\t\tpoiList:[],\r\n    }\r\n  },\r\n  methods: {\r\n    \r\n//--------地图搜索-----------\r\n\t\tsearch(){\r\n\t\t\tthis.is1 = !this.is1\r\n\t\t\tthis.toolSerach = !this.toolSerach\r\n\t\t\tif(this.toolSerach===false){\r\n\t\t\t\tthis.showsearchResult = false\r\n\t\t\t\t//清除结果标点，暂时还没做\r\n\t\t\t}\r\n\t\t},\r\n\t\tmarkerResult(data){\r\n\t\t\tvar marker = this.AMap.Marker({\r\n\t\t\t\tposition: [Number(data.location.lng),Number(data.location.lat)],\r\n\t\t\t\tcursor:'pointer',\r\n\t\t\t\t// icon: carIcon,\r\n\t\t\t\tautoRotation: true,\r\n\t\t\t\tangle:0,\r\n\t\t\t\toffset: this.AMap.Pixel(-36, -30),\r\n\t\t\t});\r\n\t\t\tmarker.setMap(this.mapall);\r\n\t\t\tthis.mapall.setFitView();\r\n\t\t},\r\n\t\t/** 初始化搜索工具 */\r\n\t\tmapSearchInit(){   //在mounted中调用\r\n\t\t\tvar autoOptions = {\r\n\t\t\t\tinput: \"tipInput\",\r\n\t\t\t}\r\n\t\t\tvar autoCompleteComponent= this.AMap.Autocomplete(autoOptions);\r\n\t\t\tthis.autoCompleteComponent = autoCompleteComponent;\r\n\t\t\t// 注册placeSearch组件\r\n\t\t\tthis.placeSearchComponent = this.AMap.PlaceSearch()\r\n\t\t},\r\n\t\tsearchKeyword(){\r\n\t\t\tlet cur = this\r\n\t\t\tthis.placeSearchComponent.search(this.inputSearchVal, function (status, result) {\r\n\t\t\t\t// 查询成功时，result即对应匹配的POI信息\r\n\t\t\t\tconsole.log(status);\r\n\t\t\t\tconsole.log(result);\r\n\t\t\t\tif(status==='complete' && result.info === \"OK\"){\r\n\t\t\t\t\tcur.showsearchResult = true\r\n\t\t\t\t\tcur.poiList = result.poiList.pois\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcur.showsearchResult = false\r\n\t\t\t\t\tcur.poiList = []\r\n\t\t\t\t\tcur.$message({\r\n\t\t\t\t\t\tmessage: \"没有查到结果\",\r\n\t\t\t\t\t\ttype: \"warning\",\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n  },\r\n  mounted(){\r\n    AMapLoader.load({\r\n        key: \"a05ab04a5dbe61ad2fad7b664790a18f\", // 申请好的Web端开发者Key，首次调用 load 时必填\r\n        version: \"2.0\", // 指定要加载的 JSAPI 的版本，缺省时默认为 1.4.15\r\n        plugins: [], // 需要使用的的插件列表，如比例尺'AMap.Scale'等\r\n      }).then((AMap)=> {\r\n        this.AMap = AMap\r\n        var autoOptions = {\r\n\t\t\t\tinput: \"tipInput\",\r\n\t\t\t}\r\n\t\t\tvar autoCompleteComponent= new AMap.Autocomplete(autoOptions);\r\n\t\t\tthis.autoCompleteComponent = autoCompleteComponent;\r\n\t\t\t// 注册placeSearch组件\r\n\t\t\tthis.placeSearchComponent = new AMap.PlaceSearch()\r\n      })\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.tool_search{\r\n      width: 250px;top: 42px;right: 270px;height:32px;\r\n      background:#eee;opacity: 0.8;border-radius: 4px;margin-top:2px;\r\n      bottom: auto;z-index:12;position: absolute;text-align: left;\r\n      font-size: 14px;\r\n  }\r\n  ::v-deep .el-input-group__append, .el-input-group__prepend{\r\n    border: 1px solid rgb(194, 193, 193);\r\n    border-left: none;\r\n    background: rgb(231, 230, 230);\r\n    color: rgb(77, 77, 73);\r\n  }\r\n  ::v-deep .el-input__inner{\r\n    border: 1px solid rgb(194, 193, 193);\r\n  }\r\n  .tool_search_result{\r\n      width: 250px;top: 78px;right: 270px;height:300px;\r\n      border: 1px solid rgb(175, 175, 173);\r\n      border-top: none;\r\n      background:#fff;opacity: 0.8;\r\n      margin-top:2px;\r\n      bottom: auto;z-index:12;position: absolute;text-align: left;\r\n      font-size: 14px;\r\n  }\r\n  .tool_search_result ul{\r\n      width:100%;\r\n      height:100%;\r\n      list-style: none;\r\n      margin: 0;\r\n      padding: 0;\r\n  }\r\n  .tool_search_result ul li{\r\n    font-size: 12px;\r\n      color: rgb(23, 40, 75);\r\n      text-align: center;\r\n      width:100%;\r\n      height:9.75%;\r\n      float: left;\r\n      margin: 0px 0px 1px 0;\r\n      padding:2.5% 4px 0 4px;\r\n      border-bottom: 1px dashed rgb(170, 170, 172);\r\n      display: inline-block;\r\n      white-space: nowrap; \r\n      overflow: hidden;\r\n      text-overflow:ellipsis;\r\n  }\r\n  .tool_search_result ul li:last-child{\r\n    border: none;\r\n  }\r\n  </style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}