{"ast":null,"code":"import AMapLoader from \"@amap/amap-jsapi-loader\";\nexport default {\n  name: \"map-view\",\n  mounted() {\n    this.initAMap();\n  },\n  unmounted() {\n    this.map?.destroy();\n  },\n  created() {\n    this.$store.commit(\"setBreadList\", [{\n      title: '地图管理'\n    }, {\n      title: '预览'\n    }]);\n    console.log('asd', this.$store.state.location);\n  },\n  methods: {\n    initAMap() {\n      AMapLoader.load({\n        key: \"a05ab04a5dbe61ad2fad7b664790a18f\",\n        // 申请好的Web端开发者Key，首次调用 load 时必填\n        version: \"2.0\",\n        // 指定要加载的 JSAPI 的版本，缺省时默认为 1.4.15\n        plugins: [] // 需要使用的的插件列表，如比例尺'AMap.Scale'等\n      }).then(AMap => {\n        this.map = new AMap.Map(\"container\", {\n          // 设置地图容器id\n          viewMode: \"2D\",\n          // 是否为3D地图模式\n          zoom: 14,\n          // 初始化地图级别\n          center: [118.28752699999995, 35.12255099999999] // 初始化地图中心点位置\n        });\n        this.map.plugin('AMap.Geolocation', function () {\n          var geolocation = new AMap.Geolocation({\n            enableHighAccuracy: true,\n            // 是否使用高精度定位，默认：true\n            timeout: 10000,\n            // 设置定位超时时间，默认：无穷大\n            offset: [10, 20],\n            // 定位按钮的停靠位置的偏移量\n            zoomToAccuracy: true,\n            //  定位成功后调整地图视野范围使定位位置及精度范围视野内可见，默认：false\n            position: 'RB' //  定位按钮的排放位置,  RB表示右下\n          });\n          geolocation.getCurrentPosition(function (status, result) {\n            if (status == 'complete') {\n              onComplete(result);\n            } else {\n              onError(result);\n            }\n          });\n          function onComplete(data) {\n            // data是具体的定位信息\n            console.log('经纬度', data.position);\n            this.$store.commit('updateLocation', data.position);\n          }\n          function onError(data) {\n            // 定位出错\n            if (data.message.includes(\"permission denied\")) {\n              console.log('定位权限被拒绝，请检查浏览器设置。', data);\n            } else {\n              console.log('定位失败', data);\n            }\n          }\n        });\n      }).catch(e => {\n        console.log(e);\n      });\n    }\n  }\n};","map":{"version":3,"names":["AMapLoader","name","mounted","initAMap","unmounted","map","destroy","created","$store","commit","title","console","log","state","location","methods","load","key","version","plugins","then","AMap","Map","viewMode","zoom","center","plugin","geolocation","Geolocation","enableHighAccuracy","timeout","offset","zoomToAccuracy","position","getCurrentPosition","status","result","onComplete","onError","data","message","includes","catch","e"],"sources":["C:\\Users\\Administrator\\Desktop\\web\\web\\src\\components\\MapContainer.vue"],"sourcesContent":["<template>\n  <div id=\"container\"></div>\n</template>\n<script>\nimport AMapLoader from \"@amap/amap-jsapi-loader\";\n\nexport default {\n  name: \"map-view\",\n  mounted() {\n    this.initAMap();\n  },\n  unmounted() {\n    this.map?.destroy();\n  },\n  created() {\n    this.$store.commit(\"setBreadList\", [{ title: '地图管理' }, { title: '预览' }]);\n    console.log('asd',this.$store.state.location);\n  },\n  methods: {\n    initAMap() {\n      AMapLoader.load({\n        key: \"a05ab04a5dbe61ad2fad7b664790a18f\", // 申请好的Web端开发者Key，首次调用 load 时必填\n        version: \"2.0\", // 指定要加载的 JSAPI 的版本，缺省时默认为 1.4.15\n        plugins: [], // 需要使用的的插件列表，如比例尺'AMap.Scale'等\n      })\n        .then((AMap) => {\n          this.map = new AMap.Map(\"container\", {\n            // 设置地图容器id\n            viewMode: \"2D\", // 是否为3D地图模式\n            zoom: 14, // 初始化地图级别\n            center: [118.28752699999995, 35.12255099999999], // 初始化地图中心点位置\n          });\n          this.map.plugin('AMap.Geolocation', function () {\n            var geolocation = new AMap.Geolocation({\n              enableHighAccuracy: true, // 是否使用高精度定位，默认：true\n              timeout: 10000, // 设置定位超时时间，默认：无穷大\n              offset: [10, 20],  // 定位按钮的停靠位置的偏移量\n              zoomToAccuracy: true,  //  定位成功后调整地图视野范围使定位位置及精度范围视野内可见，默认：false\n              position: 'RB' //  定位按钮的排放位置,  RB表示右下\n            })\n\n            geolocation.getCurrentPosition(function (status, result) {\n              if (status == 'complete') {\n                onComplete(result)\n              } else {\n                onError(result)\n              }\n            });\n\n            function onComplete(data) {\n              // data是具体的定位信息\n              console.log('经纬度', data.position);\n              this.$store.commit('updateLocation', data.position)\n            }\n\n            function onError(data) {\n              // 定位出错\n              if (data.message.includes(\"permission denied\")) {\n                console.log('定位权限被拒绝，请检查浏览器设置。', data);\n              } else {\n                console.log('定位失败', data);\n              }\n            }\n          })\n        })\n        .catch((e) => {\n          console.log(e);\n        });\n    },\n  },\n};\n</script>\n<style scoped>\n#container {\n  width: 100%;\n  height: 600px;\n  max-height: 100%;\n}\n</style>\n"],"mappings":"AAIA,OAAOA,UAAS,MAAO,yBAAyB;AAEhD,eAAe;EACbC,IAAI,EAAE,UAAU;EAChBC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,QAAQ,CAAC,CAAC;EACjB,CAAC;EACDC,SAASA,CAAA,EAAG;IACV,IAAI,CAACC,GAAG,EAAEC,OAAO,CAAC,CAAC;EACrB,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,MAAM,CAACC,MAAM,CAAC,cAAc,EAAE,CAAC;MAAEC,KAAK,EAAE;IAAO,CAAC,EAAE;MAAEA,KAAK,EAAE;IAAK,CAAC,CAAC,CAAC;IACxEC,OAAO,CAACC,GAAG,CAAC,KAAK,EAAC,IAAI,CAACJ,MAAM,CAACK,KAAK,CAACC,QAAQ,CAAC;EAC/C,CAAC;EACDC,OAAO,EAAE;IACPZ,QAAQA,CAAA,EAAG;MACTH,UAAU,CAACgB,IAAI,CAAC;QACdC,GAAG,EAAE,kCAAkC;QAAE;QACzCC,OAAO,EAAE,KAAK;QAAE;QAChBC,OAAO,EAAE,EAAE,CAAE;MACf,CAAC,EACEC,IAAI,CAAEC,IAAI,IAAK;QACd,IAAI,CAAChB,GAAE,GAAI,IAAIgB,IAAI,CAACC,GAAG,CAAC,WAAW,EAAE;UACnC;UACAC,QAAQ,EAAE,IAAI;UAAE;UAChBC,IAAI,EAAE,EAAE;UAAE;UACVC,MAAM,EAAE,CAAC,kBAAkB,EAAE,iBAAiB,CAAC,CAAE;QACnD,CAAC,CAAC;QACF,IAAI,CAACpB,GAAG,CAACqB,MAAM,CAAC,kBAAkB,EAAE,YAAY;UAC9C,IAAIC,WAAU,GAAI,IAAIN,IAAI,CAACO,WAAW,CAAC;YACrCC,kBAAkB,EAAE,IAAI;YAAE;YAC1BC,OAAO,EAAE,KAAK;YAAE;YAChBC,MAAM,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;YAAG;YACnBC,cAAc,EAAE,IAAI;YAAG;YACvBC,QAAQ,EAAE,IAAG,CAAE;UACjB,CAAC;UAEDN,WAAW,CAACO,kBAAkB,CAAC,UAAUC,MAAM,EAAEC,MAAM,EAAE;YACvD,IAAID,MAAK,IAAK,UAAU,EAAE;cACxBE,UAAU,CAACD,MAAM;YACnB,OAAO;cACLE,OAAO,CAACF,MAAM;YAChB;UACF,CAAC,CAAC;UAEF,SAASC,UAAUA,CAACE,IAAI,EAAE;YACxB;YACA5B,OAAO,CAACC,GAAG,CAAC,KAAK,EAAE2B,IAAI,CAACN,QAAQ,CAAC;YACjC,IAAI,CAACzB,MAAM,CAACC,MAAM,CAAC,gBAAgB,EAAE8B,IAAI,CAACN,QAAQ;UACpD;UAEA,SAASK,OAAOA,CAACC,IAAI,EAAE;YACrB;YACA,IAAIA,IAAI,CAACC,OAAO,CAACC,QAAQ,CAAC,mBAAmB,CAAC,EAAE;cAC9C9B,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAE2B,IAAI,CAAC;YACxC,OAAO;cACL5B,OAAO,CAACC,GAAG,CAAC,MAAM,EAAE2B,IAAI,CAAC;YAC3B;UACF;QACF,CAAC;MACH,CAAC,EACAG,KAAK,CAAEC,CAAC,IAAK;QACZhC,OAAO,CAACC,GAAG,CAAC+B,CAAC,CAAC;MAChB,CAAC,CAAC;IACN;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}