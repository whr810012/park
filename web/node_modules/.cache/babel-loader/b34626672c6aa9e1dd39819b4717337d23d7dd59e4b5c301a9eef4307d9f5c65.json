{"ast":null,"code":"import { getAllAdmin, deleteAdmin } from \"../../api/request.js\";\nexport default {\n  name: \"marksManage\",\n  data() {\n    return {\n      imageshow: false,\n      dialogFormVisible: false,\n      changeVisible: false,\n      form: {\n        email: '',\n        userName: '',\n        password: ''\n      },\n      tableData: [],\n      multipleSelection: []\n    };\n  },\n  computed: {\n    myInfo() {\n      return this.$store.state.MyInfo;\n    }\n  },\n  methods: {\n    changeOptions() {\n      this.changeVisible = true;\n    },\n    handleSelectionChange(val) {\n      this.multipleSelection = val;\n    },\n    addOptions() {\n      this.dialogFormVisible = true;\n      this.form = {\n        email: '',\n        userName: '',\n        password: ''\n      };\n    },\n    uploadFrom() {\n      console.log(this.form);\n    },\n    deleteMarkers() {\n      console.log(this.multipleSelection);\n      if (this.multipleSelection.length == 0) {\n        this.$message.error('请选择要删除的标记');\n        return;\n      }\n      if (!this.myInfo.sorct) {\n        return this.$message.error('无权限删除');\n      }\n      const ids = this.multipleSelection.map(item => item.adminid);\n      if (this.multipleSelection.find(item => !!item.sorct)) {\n        return this.$message.error('不可删除超级管理员');\n      }\n      this.$confirm('确定删除？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        console.log(ids);\n        deleteAdmin({\n          ids: ids\n        }).then(res => {\n          this.init();\n        });\n      });\n    },\n    init() {\n      getAllAdmin().then(res => {\n        console.log(res.data.data);\n        this.tableData = res.data.data;\n      });\n    }\n  },\n  created() {\n    this.$store.commit(\"setBreadList\", [{\n      title: '管理员管理'\n    }]);\n    this.init();\n  }\n};","map":{"version":3,"names":["getAllAdmin","deleteAdmin","name","data","imageshow","dialogFormVisible","changeVisible","form","email","userName","password","tableData","multipleSelection","computed","myInfo","$store","state","MyInfo","methods","changeOptions","handleSelectionChange","val","addOptions","uploadFrom","console","log","deleteMarkers","length","$message","error","sorct","ids","map","item","adminid","find","$confirm","confirmButtonText","cancelButtonText","type","then","res","init","created","commit","title"],"sources":["C:\\Users\\Administrator\\Desktop\\park-vue\\web\\src\\components\\mapmanage\\MarksManage.vue"],"sourcesContent":["<template>\r\n    <div class=\"options-manage\">\r\n        <div style=\"margin-bottom: 20px\">\r\n            <el-button type=\"primary\" @click=\"addOptions\">添加</el-button>\r\n            <el-button type=\"primary\" @click=\"changeOptions\">修改</el-button>\r\n            <el-button type=\"danger\" @click=\"deleteMarkers\">删除</el-button>\r\n        </div>\r\n        <el-table ref=\"multipleTableRef\" :data=\"tableData\" border style=\"width: 100%\"\r\n            @selection-change=\"handleSelectionChange\">\r\n            <el-table-column type=\"index\" label=\"序号\" width=\"120\" align=\"center\"></el-table-column>\r\n            <el-table-column type=\"selection\" :selectable=\"selectable\" width=\"55\" align=\"center\" />\r\n            <el-table-column property=\"email\" label=\"邮箱\" align=\"center\" />\r\n            <el-table-column property=\"userName\" label=\"昵称\" align=\"center\" />\r\n            <el-table-column property=\"adminid\" label=\"adminid\" align=\"center\" />\r\n            <el-table-column property=\"sorct\" label=\"权限\" align=\"center\">\r\n                <template #default=\"scope\">\r\n                    {{ !!scope.row.sorct ? '超级管理员' : '管理员' }}\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n        <el-dialog v-if=\"dialogFormVisible\" v-model=\"dialogFormVisible\" title=\"添加管理员\" width=\"500\" @close=\"form = {};dialogFormVisible = false\">\r\n            <el-form :model=\"form\" label-width=\"70px\">\r\n                <el-form-item label=\"邮箱\" :label-width=\"formLabelWidth\">\r\n                    <el-input v-model=\"form.email\" placeholder=\"请输入邮箱\" autocomplete=\"off\" />\r\n                </el-form-item>\r\n                <el-form-item label=\"用户名\" :label-width=\"formLabelWidth\">\r\n                    <el-input v-model=\"form.userName\" placeholder=\"请输入用户名\" autocomplete=\"off\" />\r\n                </el-form-item>\r\n                <el-form-item label=\"密码\" :label-width=\"formLabelWidth\">\r\n                    <el-input v-model=\"form.password\" placeholder=\"请输入密码\"  autocomplete=\"off\" type=\"password\" />\r\n                </el-form-item>\r\n            </el-form>\r\n            <template #footer>\r\n                <div class=\"dialog-footer\">\r\n                    <el-button @click=\"dialogFormVisible = false\">取消</el-button>\r\n                    <el-button type=\"primary\" @click=\"uploadFrom\">\r\n                        确认\r\n                    </el-button>\r\n                </div>\r\n            </template>\r\n        </el-dialog>\r\n        <el-dialog v-if=\"changeVisible\" v-model=\"changeVisible\" title=\"添加管理员\" width=\"500\" @close=\"form = {};changeVisible = false\">\r\n            <el-form :model=\"form\" label-width=\"70px\">\r\n                <el-form-item label=\"邮箱\" :label-width=\"formLabelWidth\">\r\n                    <el-input v-model=\"form.email\" placeholder=\"请输入邮箱\" autocomplete=\"off\" />\r\n                </el-form-item>\r\n                <el-form-item label=\"用户名\" :label-width=\"formLabelWidth\">\r\n                    <el-input v-model=\"form.userName\" placeholder=\"请输入用户名\" autocomplete=\"off\" />\r\n                </el-form-item>\r\n                <el-form-item label=\"密码\" :label-width=\"formLabelWidth\">\r\n                    <el-input v-model=\"form.password\" placeholder=\"请输入密码\"  autocomplete=\"off\" type=\"password\" />\r\n                </el-form-item>\r\n            </el-form>\r\n            <template #footer>\r\n                <div class=\"dialog-footer\">\r\n                    <el-button @click=\"changeVisible = false\">取消</el-button>\r\n                    <el-button type=\"primary\" @click=\"uploadFrom\">\r\n                        确认\r\n                    </el-button>\r\n                </div>\r\n            </template>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { getAllAdmin, deleteAdmin } from \"../../api/request.js\";\r\nexport default {\r\n    name: \"marksManage\",\r\n    data() {\r\n        return {\r\n            imageshow: false,\r\n            dialogFormVisible: false,\r\n            changeVisible: false,\r\n            form: {\r\n                email:'',\r\n                userName: '',\r\n                password: '',\r\n            },\r\n            tableData: [],\r\n            multipleSelection: [],\r\n        }\r\n    },\r\n    computed: {\r\n      myInfo () {\r\n        return this.$store.state.MyInfo\r\n      }    \r\n    },\r\n    methods: {\r\n        changeOptions () {\r\n            this.changeVisible = true\r\n        },\r\n        handleSelectionChange(val) {\r\n            this.multipleSelection = val\r\n        },\r\n        addOptions () {\r\n            this.dialogFormVisible = true\r\n            this.form = {\r\n                email:'',\r\n                userName: '',\r\n                password: '',\r\n            }\r\n        },\r\n        uploadFrom () {\r\n            console.log(this.form);\r\n        },\r\n        deleteMarkers() {\r\n            console.log(this.multipleSelection);\r\n            if (this.multipleSelection.length == 0) {\r\n                this.$message.error('请选择要删除的标记')\r\n                return\r\n            }\r\n            if (!this.myInfo.sorct) {\r\n                return this.$message.error('无权限删除')\r\n            }\r\n            const ids = this.multipleSelection.map(item => item.adminid)\r\n            if ( this.multipleSelection.find(item => !!item.sorct)) {\r\n                return this.$message.error('不可删除超级管理员')\r\n            }\r\n            this.$confirm('确定删除？', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(() => {\r\n                console.log(ids);\r\n                deleteAdmin({ids: ids}).then(res => {\r\n                    this.init()\r\n                })\r\n            })\r\n        },\r\n        init() {\r\n            getAllAdmin().then(res => {\r\n                console.log(res.data.data)\r\n                this.tableData = res.data.data\r\n            })\r\n        }\r\n\r\n    },\r\n    created() {\r\n        this.$store.commit(\"setBreadList\", [{ title: '管理员管理' }]);\r\n        this.init()\r\n    },\r\n}\r\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}