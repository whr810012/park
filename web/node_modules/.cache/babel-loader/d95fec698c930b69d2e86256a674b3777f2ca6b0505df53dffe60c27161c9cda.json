{"ast":null,"code":"import { getUser, Register, changeUser, deleteUser } from '@/api/request';\nimport dayjs from 'dayjs';\nexport default {\n  name: 'userMangae',\n  data() {\n    return {\n      tableList: [],\n      checkVal: {},\n      addUserShow: false,\n      changeUserShow: false,\n      form: {\n        username: '',\n        password: ''\n      },\n      changeForm: {}\n    };\n  },\n  methods: {\n    getUser() {\n      getUser().then(res => {\n        console.log(res.data.result);\n        this.tableList = res.data.result;\n        this.tableList.forEach(item => {\n          item.time = dayjs(item.time).format('YYYY-MM-DD HH:mm:ss');\n        });\n      });\n    },\n    handleSelectionChange(val) {\n      this.checkVal = val;\n    },\n    addUser() {\n      this.addUserShow = true;\n    },\n    updateUser() {\n      Register(this.form).then(() => {\n        this.form = {\n          username: '',\n          password: ''\n        };\n        this.addUserShow = false;\n        this.$message.success('添加成功');\n        this.getUser();\n      });\n    },\n    changeUserDialog() {\n      this.changeUserShow = true;\n      this.changeForm = this.checkVal[0];\n      this.changeForm.isadmin = this.changeForm.isadmin === '1' ? true : false;\n    },\n    changeUser() {\n      this.changeForm.isadmin = this.changeForm.isadmin ? '1' : '';\n      changeUser(this.changeForm).then(() => {\n        this.changeUserShow = false;\n        this.$message.success('修改成功');\n        this.getUser();\n        this.changeForm = {};\n      });\n    },\n    deleteUser() {\n      this.$confirm('此操作将永久删除该用户, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        deleteUser({\n          uid: this.checkVal[0].uid\n        }).then(() => {\n          this.$message.success('删除成功');\n          this.getUser();\n        });\n      });\n    }\n  },\n  created() {\n    this.getUser();\n  }\n};","map":{"version":3,"names":["getUser","Register","changeUser","deleteUser","dayjs","name","data","tableList","checkVal","addUserShow","changeUserShow","form","username","password","changeForm","methods","then","res","console","log","result","forEach","item","time","format","handleSelectionChange","val","addUser","updateUser","$message","success","changeUserDialog","isadmin","$confirm","confirmButtonText","cancelButtonText","type","uid","created"],"sources":["C:\\Users\\Administrator\\Desktop\\ershou\\src\\pages\\home\\userMangae.vue"],"sourcesContent":["<template>\r\n  <div class=\"userMangae\">\r\n    <div style=\"margin-bottom: 15px;\">\r\n      <el-button type=\"primary\" @click=\"addUser\">添加用户</el-button>\r\n      <el-button type=\"primary\" @click=\"changeUserDialog\">编辑用户</el-button>\r\n      <el-button type=\"danger\" @click=\"deleteUser\">删除用户</el-button>\r\n    </div>\r\n    <div class=\"table\">\r\n      <el-table ref=\"multipleTableRef\" :data=\"tableList\" style=\"width: 100%\" border\r\n        @selection-change=\"handleSelectionChange\">\r\n        <el-table-column type=\"index\"></el-table-column>\r\n        <el-table-column type=\"selection\" :selectable=\"selectable\" width=\"55\" />\r\n        <el-table-column prop=\"uid\" label=\"ID\" align=\"center\"></el-table-column>\r\n        <el-table-column prop=\"name\" label=\"昵称\" align=\"center\"></el-table-column>\r\n        <el-table-column prop=\"username\" label=\"邮箱\" align=\"center\"></el-table-column>\r\n        <el-table-column prop=\"age\" label=\"年纪\" align=\"center\"></el-table-column>\r\n        <el-table-column prop=\"xingbie\" label=\"性别\" align=\"center\"></el-table-column>\r\n        <el-table-column prop=\"telephone\" label=\"电话\" align=\"center\"></el-table-column>\r\n        <el-table-column label=\"角色\" align=\"center\">\r\n          <template #default=\"scope\">\r\n            <span v-if=\"scope.row.isadmin === '1'\">管理员</span>\r\n            <span v-else>普通用户</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" prop=\"time\" label=\"注册时间\"></el-table-column>\r\n\r\n      </el-table>\r\n    </div>\r\n    <el-dialog v-if=\"addUserShow\" v-model=\"addUserShow\" title=\"添加用户\" width=\"45%\">\r\n      <el-form :model=\"form\">\r\n        <el-form-item label=\"邮箱\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form.username\" autocomplete=\"off\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form.password\" autocomplete=\"off\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <el-button type=\"primary\" @click=\"updateUser\">添加</el-button>\r\n    </el-dialog>\r\n    <el-dialog v-if=\"changeUserShow\" v-model=\"changeUserShow\" title=\"编辑用户\" width=\"45%\">\r\n      <el-form :model=\"changeForm\">\r\n        <el-form-item label=\"密码\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"changeForm.password\" autocomplete=\"off\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"昵称\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"changeForm.name\" autocomplete=\"off\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"年纪\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"changeForm.age\" autocomplete=\"off\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"性别\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"changeForm.xingbie\" autocomplete=\"off\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"电话\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"changeForm.telephone\" autocomplete=\"off\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"设置为管理员\" :label-width=\"formLabelWidth\">\r\n          <el-checkbox v-model=\"changeForm.isadmin\"></el-checkbox>\r\n        </el-form-item>\r\n      </el-form>\r\n      <el-button type=\"primary\" @click=\"changeUser\">修改</el-button>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getUser, Register, changeUser, deleteUser } from '@/api/request'\r\nimport dayjs from 'dayjs'\r\nexport default {\r\n  name: 'userMangae',\r\n  data() {\r\n    return {\r\n      tableList: [],\r\n      checkVal: {},\r\n      addUserShow: false,\r\n      changeUserShow: false,\r\n      form: {\r\n        username: '',\r\n        password: ''\r\n      },\r\n      changeForm: {\r\n\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    getUser() {\r\n      getUser().then(res => {\r\n        console.log(res.data.result)\r\n        this.tableList = res.data.result\r\n        this.tableList.forEach(item => {\r\n          item.time = dayjs(item.time).format('YYYY-MM-DD HH:mm:ss')\r\n        })\r\n      })\r\n    },\r\n    handleSelectionChange(val) {\r\n      this.checkVal = val\r\n    },\r\n    addUser() {\r\n      this.addUserShow = true\r\n    },\r\n    updateUser() {\r\n      Register(this.form).then(() => {\r\n        this.form = {\r\n          username: '',\r\n          password: ''\r\n        }\r\n        this.addUserShow = false\r\n        this.$message.success('添加成功')\r\n        this.getUser()\r\n      })\r\n    },\r\n    changeUserDialog() {\r\n      this.changeUserShow = true\r\n      this.changeForm = this.checkVal[0]\r\n      this.changeForm.isadmin = this.changeForm.isadmin === '1' ? true : false\r\n    },\r\n    changeUser() {\r\n      this.changeForm.isadmin = this.changeForm.isadmin ? '1' : ''\r\n      changeUser(this.changeForm).then(() => {\r\n        this.changeUserShow = false\r\n        this.$message.success('修改成功')\r\n        this.getUser()\r\n        this.changeForm = {}\r\n      })\r\n    },\r\n    deleteUser() {\r\n      this.$confirm('此操作将永久删除该用户, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        deleteUser({ uid: this.checkVal[0].uid }).then(() => {\r\n          this.$message.success('删除成功')\r\n          this.getUser()\r\n        })\r\n      })\r\n    }\r\n  },\r\n  created() {\r\n    this.getUser()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.userMangae {\r\n  height: calc(100% - 20px);\r\n  background: #fff;\r\n  padding: 20px 20px 0 20px;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}