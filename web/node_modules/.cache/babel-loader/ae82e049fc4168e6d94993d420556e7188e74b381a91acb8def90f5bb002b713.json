{"ast":null,"code":"import { getAllUser, deleteUser } from '@/api/request';\nimport dayjs from 'dayjs';\nexport default {\n  name: 'userMangae',\n  data() {\n    return {\n      tableList: [],\n      checkVal: {},\n      addUserShow: false,\n      changeUserShow: false,\n      form: {\n        username: '',\n        password: ''\n      },\n      changeForm: {},\n      currentPage: 1\n    };\n  },\n  computed: {\n    filterTable() {\n      return this.tableList.filter((item, index) => {\n        return index >= (this.currentPage - 1) * 10 && index < this.currentPage * 10;\n      });\n    }\n  },\n  methods: {\n    getUser() {\n      getAllUser().then(res => {\n        console.log(res.data.result);\n        this.tableList = res.data.data;\n        this.tableList.forEach(item => {\n          item.createTime = dayjs(item.createTime).format('YYYY-MM-DD HH:mm:ss');\n        });\n      });\n    },\n    handleSelectionChange(val) {\n      this.checkVal = val;\n    },\n    deleteUser() {\n      this.$confirm('此操作将永久删除该用户, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        const list = this.checkVal.map(item => item.openId);\n        deleteUser(list).then(() => {\n          this.$message.success('删除成功');\n          this.getUser();\n        });\n      });\n    }\n  },\n  created() {\n    this.getUser();\n  }\n};","map":{"version":3,"names":["getAllUser","deleteUser","dayjs","name","data","tableList","checkVal","addUserShow","changeUserShow","form","username","password","changeForm","currentPage","computed","filterTable","filter","item","index","methods","getUser","then","res","console","log","result","forEach","createTime","format","handleSelectionChange","val","$confirm","confirmButtonText","cancelButtonText","type","list","map","openId","$message","success","created"],"sources":["D:\\CODE\\park\\park-vue\\web\\src\\pages\\home\\userMangae.vue"],"sourcesContent":["<template>\r\n  <div class=\"userMangae\">\r\n    <div style=\"margin-bottom: 15px;\">\r\n      <el-button type=\"danger\" @click=\"deleteUser\">删除用户</el-button>\r\n    </div>\r\n    <div class=\"table\">\r\n      <el-table ref=\"multipleTableRef\" :data=\"filterTable\" style=\"width: 100%\" border\r\n        @selection-change=\"handleSelectionChange\">\r\n        <el-table-column type=\"index\" label=\"序号\" width=\"70\" align=\"center\"></el-table-column>\r\n        <el-table-column type=\"selection\" :selectable=\"selectable\" width=\"55\" />\r\n        <el-table-column prop=\"userName\" label=\"昵称\" align=\"center\"></el-table-column>\r\n        <el-table-column prop=\"age\" label=\"年纪\" align=\"center\"></el-table-column>\r\n        <el-table-column prop=\"phone\" label=\"电话\" align=\"center\"></el-table-column>\r\n        <el-table-column prop=\"carInfo\" label=\"车辆信息\" align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" prop=\"createTime\" label=\"注册时间\"></el-table-column>\r\n      </el-table>\r\n      <div style=\"margin-top: 20px\">\r\n        <el-pagination background layout=\"prev, pager, next\" :total=\"tableList.length\"\r\n          v-model:current-page=\"currentPage\"></el-pagination>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getAllUser, deleteUser } from '@/api/request'\r\nimport dayjs from 'dayjs'\r\nexport default {\r\n  name: 'userMangae',\r\n  data() {\r\n    return {\r\n      tableList: [],\r\n      checkVal: {},\r\n      addUserShow: false,\r\n      changeUserShow: false,\r\n      form: {\r\n        username: '',\r\n        password: ''\r\n      },\r\n      changeForm: {\r\n\r\n      },\r\n      currentPage: 1\r\n    }\r\n  },\r\n  computed: {\r\n    filterTable() {\r\n      return this.tableList.filter((item, index) => {\r\n        return index >= (this.currentPage - 1) * 10 && index < this.currentPage * 10\r\n      })\r\n    }\r\n  },\r\n  methods: {\r\n    getUser() {\r\n      getAllUser().then(res => {\r\n        console.log(res.data.result)\r\n        this.tableList = res.data.data\r\n        this.tableList.forEach(item => {\r\n          item.createTime = dayjs(item.createTime).format('YYYY-MM-DD HH:mm:ss')\r\n        })\r\n      })\r\n    },\r\n    handleSelectionChange(val) {\r\n      this.checkVal = val\r\n    },\r\n    deleteUser() {\r\n      this.$confirm('此操作将永久删除该用户, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        const list = this.checkVal.map(item => item.openId)\r\n        deleteUser(list).then(() => {\r\n          this.$message.success('删除成功')\r\n          this.getUser()\r\n        })\r\n      })\r\n    }\r\n  },\r\n  created() {\r\n    this.getUser()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.userMangae {\r\n  height: calc(100% - 20px);\r\n  background: #fff;\r\n  padding: 20px 20px 0 20px;\r\n}\r\n</style>"],"mappings":"AA0BA,SAASA,UAAU,EAAEC,UAAS,QAAS,eAAc;AACrD,OAAOC,KAAI,MAAO,OAAM;AACxB,eAAe;EACbC,IAAI,EAAE,YAAY;EAClBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,SAAS,EAAE,EAAE;MACbC,QAAQ,EAAE,CAAC,CAAC;MACZC,WAAW,EAAE,KAAK;MAClBC,cAAc,EAAE,KAAK;MACrBC,IAAI,EAAE;QACJC,QAAQ,EAAE,EAAE;QACZC,QAAQ,EAAE;MACZ,CAAC;MACDC,UAAU,EAAE,CAEZ,CAAC;MACDC,WAAW,EAAE;IACf;EACF,CAAC;EACDC,QAAQ,EAAE;IACRC,WAAWA,CAAA,EAAG;MACZ,OAAO,IAAI,CAACV,SAAS,CAACW,MAAM,CAAC,CAACC,IAAI,EAAEC,KAAK,KAAK;QAC5C,OAAOA,KAAI,IAAK,CAAC,IAAI,CAACL,WAAU,GAAI,CAAC,IAAI,EAAC,IAAKK,KAAI,GAAI,IAAI,CAACL,WAAU,GAAI,EAAC;MAC7E,CAAC;IACH;EACF,CAAC;EACDM,OAAO,EAAE;IACPC,OAAOA,CAAA,EAAG;MACRpB,UAAU,CAAC,CAAC,CAACqB,IAAI,CAACC,GAAE,IAAK;QACvBC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAClB,IAAI,CAACqB,MAAM;QAC3B,IAAI,CAACpB,SAAQ,GAAIiB,GAAG,CAAClB,IAAI,CAACA,IAAG;QAC7B,IAAI,CAACC,SAAS,CAACqB,OAAO,CAACT,IAAG,IAAK;UAC7BA,IAAI,CAACU,UAAS,GAAIzB,KAAK,CAACe,IAAI,CAACU,UAAU,CAAC,CAACC,MAAM,CAAC,qBAAqB;QACvE,CAAC;MACH,CAAC;IACH,CAAC;IACDC,qBAAqBA,CAACC,GAAG,EAAE;MACzB,IAAI,CAACxB,QAAO,GAAIwB,GAAE;IACpB,CAAC;IACD7B,UAAUA,CAAA,EAAG;MACX,IAAI,CAAC8B,QAAQ,CAAC,oBAAoB,EAAE,IAAI,EAAE;QACxCC,iBAAiB,EAAE,IAAI;QACvBC,gBAAgB,EAAE,IAAI;QACtBC,IAAI,EAAE;MACR,CAAC,CAAC,CAACb,IAAI,CAAC,MAAM;QACZ,MAAMc,IAAG,GAAI,IAAI,CAAC7B,QAAQ,CAAC8B,GAAG,CAACnB,IAAG,IAAKA,IAAI,CAACoB,MAAM;QAClDpC,UAAU,CAACkC,IAAI,CAAC,CAACd,IAAI,CAAC,MAAM;UAC1B,IAAI,CAACiB,QAAQ,CAACC,OAAO,CAAC,MAAM;UAC5B,IAAI,CAACnB,OAAO,CAAC;QACf,CAAC;MACH,CAAC;IACH;EACF,CAAC;EACDoB,OAAOA,CAAA,EAAG;IACR,IAAI,CAACpB,OAAO,CAAC;EACf;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}