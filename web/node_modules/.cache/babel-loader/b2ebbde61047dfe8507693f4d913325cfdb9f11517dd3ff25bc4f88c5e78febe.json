{"ast":null,"code":"import { getMyOrder, agreeOver, refuseOver, finishOver } from '../../api/request';\nimport dayjs from 'dayjs';\nexport default {\n  data() {\n    return {\n      orderList: [],\n      options: [{\n        label: '书籍',\n        value: 'book'\n      }, {\n        label: '电子产品',\n        value: 'electronics'\n      }, {\n        label: '食品',\n        value: 'food'\n      }, {\n        label: '衣物',\n        value: 'clothes'\n      }, {\n        label: '家具',\n        value: 'furniture'\n      }, {\n        label: '化妆品',\n        value: 'cosmetics'\n      }, {\n        label: '运动器材',\n        value: 'sports'\n      }, {\n        label: '乐器',\n        value: 'instrument'\n      }, {\n        label: '其他',\n        value: 'other'\n      }],\n      statusList: [{\n        value: 0,\n        label: '待审核'\n      }, {\n        value: 1,\n        label: '上架中'\n      }, {\n        value: 2,\n        label: '已下架'\n      }, {\n        value: 3,\n        label: '订单交易中'\n      }, {\n        value: 4,\n        label: '已售出'\n      }],\n      orderStatusList: [{\n        value: 0,\n        label: '待商议'\n      }, {\n        value: 1,\n        label: '确认交易'\n      }, {\n        value: 2,\n        label: '已拒绝'\n      }, {\n        value: 3,\n        label: '订单已完成'\n      }]\n    };\n  },\n  methods: {\n    init() {\n      getMyOrder({\n        uid: this.$store.state.MyInfo.uid\n      }).then(res => {\n        console.log(res.data.data);\n        this.orderList = res.data.data;\n        this.orderList.forEach(item => {\n          item.orderTime = dayjs(item.orderTime).format('YYYY-MM-DD HH:mm:ss');\n        });\n      });\n    },\n    save(row) {\n      this.$confirm('是否确认交易', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        console.log(row);\n        agreeOver({\n          goodsId: row.goodsId,\n          overId: row.overId\n        }).then(() => {\n          this.$message.success('交易成功');\n          this.init();\n        });\n      });\n    },\n    refuse(row) {\n      this.$confirm('是否确认拒绝', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        refuseOver({\n          goodsId: row.goodsId,\n          overId: row.overId\n        }).then(() => {\n          this.$message.success('拒绝成功');\n          this.init();\n        });\n      });\n    },\n    finish(row) {\n      this.$confirm('是否确认完成订单', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(res => {\n        this.$message.success('完成订单成功');\n        this.init();\n      });\n    }\n  },\n  created() {\n    this.init();\n  }\n};","map":{"version":3,"names":["getMyOrder","agreeOver","refuseOver","finishOver","dayjs","data","orderList","options","label","value","statusList","orderStatusList","methods","init","uid","$store","state","MyInfo","then","res","console","log","forEach","item","orderTime","format","save","row","$confirm","confirmButtonText","cancelButtonText","type","goodsId","overId","$message","success","refuse","finish","created"],"sources":["C:\\Users\\Administrator\\Desktop\\ershou\\src\\components\\goods\\MyOrder.vue"],"sourcesContent":["<template>\r\n    <div class=\"myorder\">\r\n        <el-table :data=\"orderList\" style=\"width: 100%\">\r\n            <el-table-column type=\"index\" label=\"序号\" width=\"70\" align=\"center\"></el-table-column>\r\n            <el-table-column label=\"商品名\" prop=\"goods.name\"></el-table-column>\r\n            <el-table-column property=\"price\" label=\"商品原价\" align=\"center\">\r\n                <template #default=\"scope\">\r\n                    ￥{{ scope.row.goods.price }}\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"折扣\" prop=\"discount\" align=\"center\">\r\n                <template #default=\"scope\">\r\n                    {{ scope.row.goods.discount === 1 ? '无折扣' : scope.row.goods.discount * 10 + '折' }}\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"售价\" align=\"center\">\r\n                <template #default=\"scope\">\r\n                    ￥ {{ (scope.row.goods.price * (scope.row.goods.discount * 100)) / 100 }}\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"状态\" align=\"center\">\r\n                <template #default=\"scope\">\r\n                    {{ this.statusList.find(status => status.value === scope.row.goods.status).label }}\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"category\" label=\"商品分类\" align=\"center\">\r\n                <template #default=\"scope\">\r\n                    {{ this.options.find(option => option.value === scope.row.goods.category).label }}\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"status\" label=\"交易状态\" align=\"center\">\r\n                <template #default=\"scope\">\r\n                    {{ this.orderStatusList.find(status => status.value == scope.row.status).label }}\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"orderTime\" label=\"交易时间\" align=\"center\">\r\n            </el-table-column>\r\n            <el-table-column label=\"是否更换交易地点\">\r\n                <template #default=\"scope\">\r\n                    {{ scope.row.orderAddress ? '是' : '否' }}\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"address\" label=\"交易地址\" align=\"center\">\r\n                <template #default=\"scope\">\r\n                    <div v-if=\"scope.row.orderAddress\">\r\n                        <el-popover placement=\"top-start\" title=\"交易地址\" trigger=\"hover\">\r\n                            <span>\r\n                                {{ JSON.parse(scope.row.orderAddress).address }}\r\n                            </span>\r\n                            <template #reference>\r\n                                <div class=\"description\">{{ JSON.parse(scope.row.orderAddress).address }}</div>\r\n                            </template>\r\n                        </el-popover>\r\n                    </div>\r\n                    <div v-else>\r\n                        <el-popover placement=\"top-start\" title=\"交易地址\" trigger=\"hover\">\r\n                            <span>\r\n                                {{ scope.row.goods.address }}\r\n                            </span>\r\n                            <template #reference>\r\n                                <div class=\"description\">{{ scope.row.goods.address }}</div>\r\n                            </template>\r\n                        </el-popover>\r\n                    </div>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"description\" label=\"商品描述\" align=\"center\">\r\n                <template #default=\"scope\">\r\n                    <el-popover placement=\"top-start\" title=\"商品描述\" trigger=\"hover\">\r\n                        <span>\r\n                            {{ scope.row.goods.description }}\r\n                        </span>\r\n                        <template #reference>\r\n                            <div class=\"description\">{{ scope.row.goods.description }}</div>\r\n                        </template>\r\n                    </el-popover>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"操作\">\r\n                <template #default=\"scope\">\r\n                    <div v-if=\"scope.row.status == 0\">\r\n                        <el-button @click=\"save(scope.row)\" type=\"text\">成交</el-button>\r\n                        <el-button @click=\"refuse(scope.row)\" type=\"text\">拒绝</el-button>\r\n                    </div>\r\n                    <div v-if=\"scope.row.status == 1\">\r\n                        <el-button @click=\"finish(scope.row)\" type=\"text\">完成订单</el-button>\r\n                    </div>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { getMyOrder, agreeOver, refuseOver, finishOver } from '../../api/request'\r\nimport dayjs from 'dayjs'\r\nexport default {\r\n    data() {\r\n        return {\r\n            orderList: [],\r\n            options: [\r\n                { label: '书籍', value: 'book' },\r\n                { label: '电子产品', value: 'electronics' },\r\n                { label: '食品', value: 'food' },\r\n                { label: '衣物', value: 'clothes' },\r\n                { label: '家具', value: 'furniture' },\r\n                { label: '化妆品', value: 'cosmetics' },\r\n                { label: '运动器材', value: 'sports' },\r\n                { label: '乐器', value: 'instrument' },\r\n                { label: '其他', value: 'other' }\r\n            ],\r\n            statusList: [\r\n                { value: 0, label: '待审核' },\r\n                { value: 1, label: '上架中' },\r\n                { value: 2, label: '已下架' },\r\n                { value: 3, label: '订单交易中' },\r\n                { value: 4, label: '已售出' }\r\n            ],\r\n            orderStatusList: [\r\n                { value: 0, label: '待商议' },\r\n                { value: 1, label: '确认交易' },\r\n                { value: 2, label: '已拒绝' },\r\n                { value: 3, label: '订单已完成' }\r\n            ]\r\n        }\r\n    },\r\n    methods: {\r\n        init() {\r\n            getMyOrder({ uid: this.$store.state.MyInfo.uid }).then(res => {\r\n                console.log(res.data.data);\r\n                this.orderList = res.data.data\r\n                this.orderList.forEach(item => {\r\n                    item.orderTime = dayjs(item.orderTime).format('YYYY-MM-DD HH:mm:ss')\r\n                })\r\n            })\r\n        },\r\n        save(row) {\r\n            this.$confirm('是否确认交易', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(() => {\r\n                console.log(row);\r\n                agreeOver({ goodsId: row.goodsId, overId: row.overId }).then(() => {\r\n                    this.$message.success('交易成功')\r\n                    this.init()\r\n                })\r\n            })\r\n        },\r\n        refuse(row) {\r\n            this.$confirm('是否确认拒绝', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(() => {\r\n                refuseOver({ goodsId: row.goodsId, overId: row.overId }).then(() => {\r\n                    this.$message.success('拒绝成功')\r\n                    this.init()\r\n                })\r\n            })\r\n        },\r\n        finish(row) {\r\n            this.$confirm('是否确认完成订单', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(res => {\r\n                this.$message.success('完成订单成功')\r\n                this.init()\r\n            })\r\n        }\r\n\r\n    },\r\n    created() {\r\n        this.init()\r\n    }\r\n}\r\n</script>\r\n\r\n<style></style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}