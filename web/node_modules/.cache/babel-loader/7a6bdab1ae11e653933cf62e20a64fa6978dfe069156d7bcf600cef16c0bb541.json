{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { getGoods } from '@/api/request';\nexport default {\n  name: 'shopHome',\n  data() {\n    return {\n      currentPage: 1,\n      allGoodsList: [],\n      searchName: '',\n      options: [{\n        label: '书籍',\n        value: 'book'\n      }, {\n        label: '电子产品',\n        value: 'electronics'\n      }, {\n        label: '食品',\n        value: 'food'\n      }, {\n        label: '衣物',\n        value: 'clothes'\n      }, {\n        label: '家具',\n        value: 'furniture'\n      }, {\n        label: '化妆品',\n        value: 'cosmetics'\n      }, {\n        label: '运动器材',\n        value: 'sports'\n      }, {\n        label: '乐器',\n        value: 'instrument'\n      }, {\n        label: '其他',\n        value: 'other'\n      }],\n      options2: ['全新', '九成新', '八成新', '七成新', '六成新', '五成新', '四成新', '三成新', '二成新', '一成新'],\n      condition: \"\",\n      category: \"\",\n      sort: \"\"\n    };\n  },\n  computed: {\n    filterList() {\n      let list = this.allGoodsList.filter(item => {\n        return item.status === 1;\n      });\n      if (this.searchName) {\n        list = list.filter(item => {\n          return item.name.includes(this.searchName);\n        });\n      }\n      if (this.condition) {\n        list = list.filter(item => {\n          return item.condition === this.condition;\n        });\n      }\n      if (this.category) {\n        list = list.filter(item => {\n          return item.category === this.category;\n        });\n      }\n      if (this.sort) {\n        if (this.sort === 'priceAsc') {\n          list = list.sort((a, b) => {\n            return a.price - b.price;\n          });\n        } else if (this.sort === 'priceDesc') {\n          list = list.sort((a, b) => {\n            return b.price - a.price;\n          });\n        } else if (this.sort === 'timeAsc') {\n          list = list.sort((a, b) => {\n            return new Date(a.createTime) - new Date(b.createTime);\n          });\n        } else if (this.sort === 'timeDesc') {\n          list = list.sort((a, b) => {\n            return new Date(b.createTime) - new Date(a.createTime);\n          });\n        }\n      }\n      list = list.slice((this.currentPage - 1) * 10, this.currentPage * 10);\n      console.log(list);\n      return list;\n    }\n  },\n  methods: {\n    gotoBuy(item) {\n      this.$router.push('/buyGoods?id=' + item.id);\n    }\n  },\n  created() {\n    getGoods().then(res => {\n      console.log(res.data.data);\n      this.allGoodsList = res.data.data;\n      this.allGoodsList.forEach(item => {\n        item.image = JSON.parse(item.filesJson);\n        item.image.forEach(img => {\n          const mimeType = img.contentType;\n          img.url = `data:${mimeType};base64,${img.base64}`;\n        });\n      });\n    });\n  }\n};","map":{"version":3,"names":["getGoods","name","data","currentPage","allGoodsList","searchName","options","label","value","options2","condition","category","sort","computed","filterList","list","filter","item","status","includes","a","b","price","Date","createTime","slice","console","log","methods","gotoBuy","$router","push","id","created","then","res","forEach","image","JSON","parse","filesJson","img","mimeType","contentType","url","base64"],"sources":["C:\\Users\\Administrator\\Desktop\\ershou\\src\\pages\\goods\\shop.vue"],"sourcesContent":["<template>\r\n  <div class=\"shop\">\r\n    <div class=\"search-box\">\r\n      <el-image :src=\"require('../../menu/menuLogo.png')\" style=\"width: 40px; height: 40px\"></el-image>\r\n      <el-input v-model=\"searchName\" class=\"search\" placeholder=\"请输入搜索内容\"></el-input>\r\n      <el-button class=\"search_button\" type=\"primary\" @click=\"search\">搜索</el-button>\r\n    </div>\r\n    <div class=\"filter-box\">\r\n      <span style=\"font-size: 12px;\">成色选择：</span>\r\n      <el-select size=\"small\" clearable v-model=\"condition\" placeholder=\"请选择商品成色\" style=\"width: 140px\">\r\n        <el-option v-for=\"item in options2\" :key=\"item\" :label=\"item\" :value=\"item\" />\r\n      </el-select>\r\n      <span style=\"font-size: 12px;margin-left: 15px;\">分类选择：</span>\r\n      <el-select clearable size=\"small\" v-model=\"category\" placeholder=\"请选择商品分类\" style=\"width: 140px\">\r\n        <el-option v-for=\"item in options\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\" />\r\n      </el-select>\r\n      <span style=\"font-size: 12px;margin-left: 15px;\">排序选择：</span>\r\n      <el-select size=\"small\" clearable v-model=\"sort\" placeholder=\"请选择排序方式\" style=\"width: 140px\">\r\n        <el-option label=\"按价格升序\" value=\"priceAsc\" />\r\n        <el-option label=\"按价格降序\" value=\"priceDesc\" />\r\n        <el-option label=\"按时间升序\" value=\"timeAsc\" />\r\n        <el-option label=\"按时间降序\" value=\"timeDesc\" />\r\n      </el-select>\r\n    </div>\r\n    <div class=\"goods-box\">\r\n      <!-- {{ filterList }} -->\r\n      <el-card v-for=\"item in filterList\" :key=\"item.goodsId\" class=\"goods-card\" style=\"width: 300px;height:180px\" @click=\"gotoBuy(item)\">\r\n        <el-image style=\"min-width: 50px;max-width:50px;height:100px\" :src=\"item.image[0].url\"></el-image>\r\n        <div class=\"goods-info\">\r\n          <div class=\"goods-name\">\r\n            {{ item.name }}\r\n          </div>\r\n          <div class=\"goods-price\" v-if=\"item.discount !== 1\">\r\n            原价：{{ item.price }}\r\n          </div>\r\n          <div class=\"goods-discount\" v-if=\"item.discount !== 1\">\r\n            <span style=\"font-size:12px\">折扣:</span><span style=\"color:red;margin-left:10px;\">{{ item.discount * 100 / 10\r\n              }}折</span>\r\n          </div>\r\n          <div>\r\n            <span style=\"font-size: 12px;\">售价：</span>\r\n            <span style=\"color:#499eff\">￥{{ (item.price * (item.discount * 100)) / 100 }}</span>\r\n          </div>\r\n          <div>\r\n            <span style=\"font-size: 12px;\">种类：</span>\r\n            <span class=\"class-box\">{{ this.options.find(option => option.value === item.category).label }}</span>\r\n          </div>\r\n          <div class=\"goods-condition\">\r\n            <span style=\"font-size: 12px;\">简述：</span>\r\n            <span style=\"font-size: 12px;\">{{ item.description }}</span>\r\n          </div>\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n    <div style=\"text-align: center; margin-top: 20px;display: flex;justify-content: center;\" v-if=\"filterList.length > 10\">\r\n      <el-pagination :current-page=\"currentPage\" layout=\"total, prev, pager, next, jumper\" :total=\"filterList.length\"></el-pagination>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getGoods } from '@/api/request'\r\nexport default {\r\n  name: 'shopHome',\r\n  data() {\r\n    return {\r\n      currentPage: 1,\r\n      allGoodsList: [],\r\n      searchName: '',\r\n      options: [\r\n        { label: '书籍', value: 'book' },\r\n        { label: '电子产品', value: 'electronics' },\r\n        { label: '食品', value: 'food' },\r\n        { label: '衣物', value: 'clothes' },\r\n        { label: '家具', value: 'furniture' },\r\n        { label: '化妆品', value: 'cosmetics' },\r\n        { label: '运动器材', value: 'sports' },\r\n        { label: '乐器', value: 'instrument' },\r\n        { label: '其他', value: 'other' }\r\n      ],\r\n      options2: ['全新', '九成新', '八成新', '七成新', '六成新', '五成新', '四成新', '三成新', '二成新', '一成新'],\r\n      condition: \"\",\r\n      category: \"\",\r\n      sort: \"\"\r\n    }\r\n  },\r\n  computed: {\r\n    filterList() {\r\n      let list = this.allGoodsList.filter(item => {\r\n        return item.status === 1\r\n      });\r\n      if (this.searchName) {\r\n        list = list.filter(item => {\r\n          return item.name.includes(this.searchName)\r\n        })\r\n      }\r\n      if (this.condition) {\r\n        list = list.filter(item => {\r\n          return item.condition === this.condition\r\n        })\r\n      }\r\n      if (this.category) {\r\n        list = list.filter(item => {\r\n          return item.category === this.category\r\n        })\r\n      }\r\n      if (this.sort) {\r\n        if (this.sort === 'priceAsc') {\r\n          list = list.sort((a, b) => {\r\n            return a.price - b.price\r\n          })\r\n        } else if (this.sort === 'priceDesc') {\r\n          list = list.sort((a, b) => {\r\n            return b.price - a.price\r\n          })\r\n        } else if (this.sort === 'timeAsc') {\r\n          list = list.sort((a, b) => {\r\n            return new Date(a.createTime) - new Date(b.createTime)\r\n          })\r\n        } else if (this.sort === 'timeDesc') {\r\n          list = list.sort((a, b) => {\r\n            return new Date(b.createTime) - new Date(a.createTime)\r\n          })\r\n        }\r\n      }\r\n      list = list.slice((this.currentPage - 1) * 10, this.currentPage * 10)\r\n      console.log(list);\r\n      return list;\r\n    }\r\n  },\r\n  methods: {\r\n    gotoBuy (item) {\r\n      this.$router.push('/buyGoods?id=' + item.id)\r\n    }\r\n  },\r\n  created() {\r\n    getGoods().then(res => {\r\n      console.log(res.data.data)\r\n      this.allGoodsList = res.data.data\r\n      this.allGoodsList.forEach(item => {\r\n        item.image = JSON.parse(item.filesJson)\r\n        item.image.forEach(img => {\r\n          const mimeType = img.contentType\r\n          img.url = `data:${mimeType};base64,${img.base64}`;\r\n        })\r\n      })\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.search-box {\r\n  text-align: center;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n\r\n  .search {\r\n    margin: 10px;\r\n    margin-right: 0px;\r\n    width: 60%;\r\n  }\r\n\r\n  /deep/.el-button {\r\n    border-radius: 0 20px 20px 0;\r\n  }\r\n\r\n  /deep/.el-input__wrapper {\r\n    border-radius: 20px 0 0 20px;\r\n  }\r\n}\r\n\r\n.filter-box {\r\n  text-align: center;\r\n}\r\n\r\n.goods-box {\r\n  margin-top: 20px;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  align-items: center;\r\n\r\n  .goods-card {\r\n    margin: 10px;\r\n    display: flex;\r\n\r\n    .goods-info {\r\n      margin-left: 10px;\r\n\r\n      .goods-name {\r\n        color: rgba($color: #499eff, $alpha: 0.6);\r\n        font-size: 16px;\r\n        font-weight: 600;\r\n      }\r\n\r\n      .goods-price {\r\n        // 删除线\r\n        text-decoration: line-through;\r\n        color: #565656;\r\n        font-size: 12px;\r\n      }\r\n\r\n      .class-box {\r\n        font-size: 12px;\r\n        border: 1px solid #ccc;\r\n        padding: 2px 15px;\r\n        border-radius: 10px;\r\n        background-color: #63b1d6;\r\n      }\r\n\r\n      .goods-condition {\r\n        margin-top:5px;\r\n        // 最多显示两行\r\n        display: -webkit-box;\r\n        -webkit-line-clamp: 2;\r\n        -webkit-box-orient: vertical;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n        color: #565656;\r\n        font-size: 12px;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/deep/.el-card__body {\r\n  display: flex;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}