{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { getAllOrder } from '../../api/request';\nimport * as echarts from 'echarts';\nimport dayjs from 'dayjs';\nexport default {\n  data() {\n    return {\n      orderList: [],\n      notOrderList: [],\n      awaitOrderList: [],\n      okOrderList: [],\n      proportionOption: {},\n      classOption: [{\n        label: '书籍',\n        value: 'book'\n      }, {\n        label: '电子产品',\n        value: 'electronics'\n      }, {\n        label: '食品',\n        value: 'food'\n      }, {\n        label: '衣物',\n        value: 'clothes'\n      }, {\n        label: '家具',\n        value: 'furniture'\n      }, {\n        label: '化妆品',\n        value: 'cosmetics'\n      }, {\n        label: '运动器材',\n        value: 'sports'\n      }, {\n        label: '乐器',\n        value: 'instrument'\n      }, {\n        label: '其他',\n        value: 'other'\n      }],\n      classProportionOption: {\n        xAxis: {\n          type: 'category',\n          data: ['书籍', '电子产品', '食品', '家具', '化妆品', '运动器材', '乐器', '其他']\n        },\n        yAxis: {\n          type: 'value'\n        },\n        series: [{\n          data: [0, 0, 0, 0, 0, 0, 0, 0],\n          type: 'bar',\n          showBackground: true,\n          backgroundStyle: {\n            color: 'rgba(180, 180, 180, 0.2)'\n          }\n        }]\n      },\n      timeOption: {\n        xAxis: {\n          type: 'category',\n          data: []\n        },\n        yAxis: {\n          type: 'value'\n        },\n        series: [{\n          data: [],\n          type: 'line'\n        }]\n      }\n    };\n  },\n  methods: {\n    async init() {\n      await getAllOrder().then(res => {\n        this.orderList = res.data.data;\n        console.log(this.orderList);\n        this.okOrderList = this.orderList.filter(item => item.status === '1' || item.status === '3');\n        this.notOrderList = this.orderList.filter(item => item.status === '2');\n        this.awaitOrderList = this.orderList.filter(item => item.status === '0');\n        // 订单类型比例图\n        this.classOption.map((item, index) => {\n          this.okOrderList.map(item1 => {\n            if (item1.goods.category == item.value) {\n              this.classProportionOption.series[0].data[index]++;\n            }\n          });\n        });\n        this.proportionOption = {\n          title: {\n            text: '订单状态比例图',\n            // subtext: 'Fake Data',\n            left: 'center'\n          },\n          tooltip: {\n            trigger: 'item'\n          },\n          legend: {\n            orient: 'vertical',\n            left: 'left'\n          },\n          series: [{\n            name: '数量',\n            type: 'pie',\n            data: [{\n              value: this.okOrderList.length,\n              name: '已确认、已完成订单'\n            }, {\n              value: this.notOrderList.length,\n              name: '已拒绝订单'\n            }, {\n              value: this.awaitOrderList.length,\n              name: '待确认订单'\n            }]\n          }]\n        };\n        let time = [];\n        this.orderList.forEach(item => {\n          item.createTime = dayjs(item.createTime).format('YYYY-MM-DD');\n        });\n        this.orderList.forEach(item => {\n          time.push(item.createTime);\n        });\n        let result = [];\n        // 遍历原始数组\n        time.forEach(date => {\n          // 查找该日期是否已经在结果数组中\n          let existing = result.find(item => item.time === date);\n          // 如果存在，num+1，否则创建一个新对象\n          if (existing) {\n            existing.num++;\n          } else {\n            result.push({\n              time: date,\n              num: 1\n            });\n          }\n        });\n        this.timeOption.xAxis.data = result.map(item => item.time);\n        this.timeOption.series[0].data = result.map(item => item.num);\n        console.log('time', result);\n        this.myChart.setOption(this.proportionOption);\n        this.myChart2.setOption(this.classProportionOption);\n      });\n    }\n  },\n  computed: {},\n  async created() {\n    await this.init();\n  },\n  mounted() {\n    this.myChart = echarts.init(document.getElementById('proportionOption'));\n    this.$nextTick(() => {\n      this.myChart.setOption(this.proportionOption);\n    });\n    this.myChart2 = echarts.init(document.getElementById('classProportionOption'));\n    this.$nextTick(() => {\n      this.myChart2.setOption(this.classProportionOption);\n    });\n  }\n};","map":{"version":3,"names":["getAllOrder","echarts","dayjs","data","orderList","notOrderList","awaitOrderList","okOrderList","proportionOption","classOption","label","value","classProportionOption","xAxis","type","yAxis","series","showBackground","backgroundStyle","color","timeOption","methods","init","then","res","console","log","filter","item","status","map","index","item1","goods","category","title","text","left","tooltip","trigger","legend","orient","name","length","time","forEach","createTime","format","push","result","date","existing","find","num","myChart","setOption","myChart2","computed","created","mounted","document","getElementById","$nextTick"],"sources":["C:\\Users\\Administrator\\Desktop\\ershou\\src\\pages\\home\\statisticsManage.vue"],"sourcesContent":["<template>\r\n  <div style=\"padding: 20px\">\r\n    <div class=\"title\">\r\n      各类型订单比例示意\r\n    </div>\r\n    <div class=\"proportionOption\" id=\"proportionOption\" style=\"width: 600px;height:400px\"></div>\r\n    <div class=\"title\">\r\n      各分类订单\r\n    </div>\r\n    <div class=\"classProportionOption\" id=\"classProportionOption\" style=\"width: 100%;height:400px\"></div>\r\n    <div class=\"title\">\r\n      订单时间分布\r\n    </div>\r\n    <div id=\"timeOption\" style=\"width: 100%;height:400px\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getAllOrder } from '../../api/request'\r\nimport * as echarts from 'echarts';\r\nimport dayjs from 'dayjs'\r\nexport default {\r\n  data() {\r\n    return {\r\n      orderList: [],\r\n      notOrderList: [],\r\n      awaitOrderList: [],\r\n      okOrderList: [],\r\n      proportionOption: {},\r\n      classOption: [\r\n        { label: '书籍', value: 'book' },\r\n        { label: '电子产品', value: 'electronics' },\r\n        { label: '食品', value: 'food' },\r\n        { label: '衣物', value: 'clothes' },\r\n        { label: '家具', value: 'furniture' },\r\n        { label: '化妆品', value: 'cosmetics' },\r\n        { label: '运动器材', value: 'sports' },\r\n        { label: '乐器', value: 'instrument' },\r\n        { label: '其他', value: 'other' }\r\n      ],\r\n      classProportionOption: {\r\n        xAxis: {\r\n          type: 'category',\r\n          data: ['书籍', '电子产品', '食品', '家具', '化妆品', '运动器材', '乐器', '其他']\r\n        },\r\n        yAxis: {\r\n          type: 'value'\r\n        },\r\n        series: [\r\n          {\r\n            data: [0, 0, 0, 0, 0, 0, 0, 0],\r\n            type: 'bar',\r\n            showBackground: true,\r\n            backgroundStyle: {\r\n              color: 'rgba(180, 180, 180, 0.2)'\r\n            }\r\n          }\r\n        ]\r\n      },\r\n      timeOption: {\r\n        xAxis: {\r\n          type: 'category',\r\n          data: []\r\n        },\r\n        yAxis: {\r\n          type: 'value'\r\n        },\r\n        series: [\r\n          {\r\n            data: [],\r\n            type: 'line'\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    async init() {\r\n      await getAllOrder().then(res => {\r\n        this.orderList = res.data.data\r\n        console.log(this.orderList)\r\n        this.okOrderList = this.orderList.filter(item => item.status === '1' || item.status === '3')\r\n        this.notOrderList = this.orderList.filter(item => item.status === '2')\r\n        this.awaitOrderList = this.orderList.filter(item => item.status === '0')\r\n        // 订单类型比例图\r\n        this.classOption.map((item, index) => {\r\n          this.okOrderList.map(item1 => {\r\n            if (item1.goods.category == item.value) {\r\n              this.classProportionOption.series[0].data[index]++\r\n            }\r\n          })\r\n        })\r\n        this.proportionOption = {\r\n          title: {\r\n            text: '订单状态比例图',\r\n            // subtext: 'Fake Data',\r\n            left: 'center'\r\n          },\r\n          tooltip: {\r\n            trigger: 'item'\r\n          },\r\n          legend: {\r\n            orient: 'vertical',\r\n            left: 'left'\r\n          },\r\n          series: [\r\n            {\r\n              name: '数量',\r\n              type: 'pie',\r\n              data: [\r\n                {\r\n                  value: this.okOrderList.length,\r\n                  name: '已确认、已完成订单'\r\n                },\r\n                {\r\n                  value: this.notOrderList.length,\r\n                  name: '已拒绝订单'\r\n                },\r\n                {\r\n                  value: this.awaitOrderList.length,\r\n                  name: '待确认订单'\r\n                }\r\n              ]\r\n            }\r\n          ]\r\n        }\r\n        let time = []\r\n        this.orderList.forEach(item => {\r\n          item.createTime = dayjs(item.createTime).format('YYYY-MM-DD')\r\n        })\r\n        this.orderList.forEach(item => {\r\n          time.push(item.createTime)\r\n        })\r\n        let result = []\r\n        // 遍历原始数组\r\n        time.forEach(date => {\r\n          // 查找该日期是否已经在结果数组中\r\n          let existing = result.find(item => item.time === date);\r\n          // 如果存在，num+1，否则创建一个新对象\r\n          if (existing) {\r\n            existing.num++;\r\n          } else {\r\n            result.push({ time: date, num: 1 });\r\n          }\r\n        })\r\n        this.timeOption.xAxis.data = result.map(item => item.time)\r\n        this.timeOption.series[0].data = result.map(item => item.num)\r\n        console.log('time', result);\r\n        this.myChart.setOption(this.proportionOption)\r\n        this.myChart2.setOption(this.classProportionOption)\r\n      })\r\n    }\r\n  },\r\n  computed: {\r\n  },\r\n  async created() {\r\n    await this.init()\r\n  },\r\n  mounted() {\r\n    this.myChart = echarts.init(document.getElementById('proportionOption'))\r\n    this.$nextTick(() => {\r\n      this.myChart.setOption(this.proportionOption)\r\n    })\r\n    this.myChart2 = echarts.init(document.getElementById('classProportionOption'))\r\n    this.$nextTick(() => {\r\n      this.myChart2.setOption(this.classProportionOption)\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.title {\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  margin-bottom: 20px;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}